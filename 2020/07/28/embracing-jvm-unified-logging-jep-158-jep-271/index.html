<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.82.1" />

    
    
    

<title>Embracing JVM unified logging (JEP-158 / JEP-271) • Brice Dutheil</title>













    
<meta property="og:locale" content="en">
<meta property="og:site_name" content="Brice Dutheil">
<meta property="og:title" content="Embracing JVM unified logging (JEP-158 / JEP-271)">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blog.arkey.fr/2020/07/28/embracing-jvm-unified-logging-jep-158-jep-271/" />
<meta property="og:description" content="Java mostly, and general tech">
<meta property="og:image" content="https://blog.arkey.fr/social-sharing.png">
<meta property="og:image:type" content="image/png">
    
    
    
<meta property="og:image:width" content="192">
<meta property="og:image:height" content="192">
    

<meta property="og:updated_time" content="2020-07-28T01:54:58&#43;0200">



<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@BriceDutheil">
<meta name="twitter:title" content="Embracing JVM unified logging (JEP-158 / JEP-271)">

<meta name="twitter:image" content="https://blog.arkey.fr/social-sharing.png">

<meta name="twitter:description" content="Java mostly, and general tech">
<meta name="twitter:creator" content="@BriceDutheil">
    
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/a11y-light.min.css" media="(prefers-color-scheme: light)"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/gruvbox-dark.min.css" media="(prefers-color-scheme: dark)">




<link rel="stylesheet" href="/scss/hyde-hyde.dd81e7ab42051dce4af5e995f71cc9ffa0a9d977c7fa252fbf1cfea75d1d463b.css" integrity="sha256-3YHnq0IFHc5K9emV9xzJ/6Cp2XfH&#43;iUvvxz&#43;p10dRjs=">


<link rel="stylesheet" href="/scss/hyde-hyde-dark.8dcf235ba9845159df4d1ea26547422f22737b721fb3bb5a9d1b7ecec0f09be8.css" integrity="sha256-jc8jW6mEUVnfTR6iZUdCLyJze3Ifs7tanRt&#43;zsDwm&#43;g=" media="(prefers-color-scheme: dark)">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">




<link rel="stylesheet" href="/scss/hugo-toc.d31afb68f96b4b4a16c6def81c6cfb18992a6924bd88766a480bb24a08ca5796.css" integrity="sha256-0xr7aPlrS0oWxt74HGz7GJkqaSS9iHZqSAuySgjKV5Y=">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    
    <link rel="shortcut icon" sizes="192x192" href="/android-192-favicon.png">

    
    <link rel="shortcut icon" href="/android-192-favicon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/v4-shims.min.css" integrity="sha512-KNosrY5jkv7dI1q54vqk0N3x1xEmEn4sjzpU1lWL6bv5VVddcYKQVhHV08468FK6eBBSXTwGlMMZLPTXSpHYHA==" crossorigin="anonymous" />

    
    


    
</head>


    <body class="">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://blog.arkey.fr">Brice Dutheil</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/f31c7fbcbb0766d0632d96fd7e74b649?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Java mostly, and general tech 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Brice Dutheil</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/"><span class='fa-icon'><i class='fas fa-home'></i></span><code>cd <em>~</em></code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/"><span class='fa-icon'><i class='fas fa-stream'></i></span><code>ls <em>posts/*</em></code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/series/"><span class='fa-icon'><i class='fas fa-list-alt'></i></span><code>grep -o <em>series</em> posts/* | sort -u</code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/"><span class='fa-icon'><i class='fas fa-tags'></i></span><code>grep -o <em>tags</em> posts/* | sort -u</code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/cool-stuff/"><span class='fa-icon'><i class='fas fa-thumbtack'></i></span><code>cd <em>cool-stuff</em></code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/whoami/"><span class='fa-icon'><i class='fas fa-id-card'></i></span><code>whoami</code>
						<span></span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/BriceDutheil" rel="me"><i class="fa-w-16" aria-hidden="true"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bird" class="svg-inline--fa fa-bird fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></i></a>
	
	
	
	<a href="https://github.com/bric3" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://speakerdeck.com/bric3" rel="me"><i class="fab fa-speaker-deck" aria-hidden="true"></i></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/dutheilbrice" rel="me"><i class="fa-w-16" aria-hidden="true"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="pro-network" class="svg-inline--fa fa-pro-network fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></i></a>
	
	
	<a href="https://stackoverflow.com/users/48136/brice" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>

  </div>
  <div class="container fixed-container">
    
<div class="copyright">
  &copy; 2010 - 2021 Brice Dutheil
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>



  </div>
</div>

        <div class="content container">
            
    <header>

 
 
 <div class="github-edit">
     <a href="https://github.com/bric3/bric3.github.io/edit/hugo-sources/content/posts/2020-07-28-embracing-jvm-unified-logging.adoc">
     <i class="fab fa-github fa-lg" aria-hidden="true"></i> Edit this page
     </a>
 </div>
 


</header>

            
    

<article>
  <header>
    <h1>Embracing JVM unified logging (JEP-158 / JEP-271)</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> 2020-07-28
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/log">log</a>
           
      
          <a class="badge badge-tag" href="/tags/jvm">jvm</a>
           
      
          <a class="badge badge-tag" href="/tags/java">java</a>
           
      
          <a class="badge badge-tag" href="/tags/unified-logging">unified logging</a>
           
      
          <a class="badge badge-tag" href="/tags/jep-158">jep-158</a>
           
      
          <a class="badge badge-tag" href="/tags/jep-271">jep-271</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 123 min read

    
    
    

</div>


  </header>
  
  
  
    <div class="toc-wrapper">
      <input type="checkbox" id="tocToggle" checked>
      <label for="tocToggle"><i class="fas fa-list-ul fa-lg"></i><span id="toc-title">On this page</span></label>
      <div id="toc-toggle-cover"></div>

      
          <nav id="TableOfContents">
  <ul>
    <li><a href="#_unified_jvm_logging_jep_158">Unified JVM Logging (JEP-158)</a></li>
    <li><a href="#_useful_usage_of_unified_logging">Useful usage of unified logging</a>
      <ul>
        <li><a href="#_how_to_use_the_tool_help_from_the_command_line">How to use the tool, help from the command line</a></li>
        <li><a href="#_migrating_the_gc_log_configuration_jep_271">Migrating the GC log configuration (JEP-271)</a></li>
        <li><a href="#_migrating_other_options">Migrating other options</a></li>
        <li><a href="#_building_a_unified_logging_tag_reference">Building a unified logging tag reference</a></li>
        <li><a href="#_other_tags_combinations_examples">Other tags combinations examples</a></li>
        <li><a href="#_programmatic_access">Programmatic access</a></li>
      </ul>
    </li>
    <li><a href="#_wrap_up">Wrap up</a></li>
  </ul>
</nav>
      
    </div>
  
  
  
  <div class="post adoc">
    
<div class="paragraph">
<p>Unified logging was introduced in JDK 9, and is available for us all, in the JDK 11 LTS.
Like other great serviceability feature (<code>jcmd</code> or JFR) this was inspired by JRockit.</p>
</div>
<div class="paragraph">
<p>As a pre-jdk9 users I had my way using the explicit GC logging options. Also, on occasions
it was useful to toggle other options like tracing class un/loading.</p>
</div>
<div class="paragraph">
<p>Starting from JDK 9, the JVM maintainers chose to overhaul the way JVM logs things.
I believe that unified logging is great, but after using it I believe its purpose
targets more JDK maintainers, eventually library maintainers, than end users.
Meanwhile it’s likely that one may need to activate GC logs.</p>
</div>
<div class="paragraph">
<p>So, while JDK 9 may seem old news today I still find it difficult to know exactly what will be logged.
Very well written blogs such as <a href="https://blog.codefx.org/java/unified-logging-with-the-xlog-option/">this one</a>
from <a href="https://twitter.com/nipafx">Nicolai Parlog</a> usually only touch the surface of unified
logging and usually focus on GC logs.
And the official documentation rarely document JVM logging well enough, apart from how old options
translate in unified logging.</p>
</div>
<div class="paragraph">
<p>While GC logging is usually a well covered topic, I found there’s information some gaps like <em>IHOP</em>
messages missing as the multitude of tags and their various levels may not be set as necessary.</p>
</div>
<div class="paragraph">
<p>In my opinion the flexibility of this logging system brought a major downside from a user’s
perspective in its configuration correctness, and I think in some ways it’s more obscure compared to
the previous explicit logging flags.</p>
</div>
<div class="paragraph">
<p>Anyway, let’s begin our exploration with a small recapitulation of <a href="https://openjdk.java.net/jeps/158">JEP-158</a>
which lays out the foundation of JVM unified logging.</p>
</div>
<div class="sect1">
<h2 id="_unified_jvm_logging_jep_158"><a class="anchor" href="#_unified_jvm_logging_jep_158"></a><a class="link" href="#_unified_jvm_logging_jep_158">Unified JVM Logging (JEP-158)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JEP describes how the logging configuration works in the command line:</p>
</div>
<details>
<summary class="title">java log configuration command line syntax</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-Xlog[:option]
    option         :=  [&lt;what&gt;][:[&lt;output&gt;][:[&lt;decorators&gt;][:&lt;output-options&gt;]]]
                       &#39;help&#39;
                       &#39;disable&#39;
    what           :=  &lt;selector&gt;[,...]
    selector       :=  &lt;tag-set&gt;[*][=&lt;level&gt;]
    tag-set        :=  &lt;tag&gt;[+...]
                       &#39;all&#39;
    tag            :=  name of tag
    level          :=  trace
                       debug
                       info
                       warning
                       error
    output         :=  &#39;stderr&#39;
                       &#39;stdout&#39;
                       [file=]&lt;filename&gt;
    decorators     :=  &lt;decorator&gt;[,...]
                       &#39;none&#39;
    decorator      :=  time
                       uptime
                       timemillis
                       uptimemillis
                       timenanos
                       uptimenanos
                       pid
                       tid
                       level
                       tags
    output-options :=  &lt;output_option&gt;[,...]
    output-option  :=  filecount=&lt;file count&gt;
                       filesize=&lt;file size&gt;
                       parameter=value</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>This command-line option is the main entry point to unified logging. It allows configuring logs
that required multiple options in a single one.</p>
</div>
<div class="paragraph">
<p>Moreover, it’s now possible to declare multiple log configuration simply by adding additional <code>-Xlog…​</code>
options. Their output must however be unique in these logs, otherwise the last option declaration will
override the previous log configuration.</p>
</div>
<div class="paragraph">
<p>Also, if you already heard of <code>jcmd</code>, unified logging JEP enabled log configurable at runtime.
It’s the second main entry point to unified logging.
<em>If you didn’t hear about <code>jcmd</code> you really should check it out. It’s the future
of the serviceability / diagnostic command on the JDK.</em></p>
</div>
<div class="quoteblock">
<div class="title">A note about <code>jcmd</code></div>
<blockquote>
<div class="paragraph">
<p><strong>Controlling at runtime</strong></p>
</div>
<div class="paragraph">
<p>Logging can be controlled at runtime through Diagnostic Commands (the <code>jcmd</code> utility).
Everything that can be specified on the command line can also be specified dynamically
with Diagnostic Commands. Since diagnostic commands are automatically exposed as MBeans
it will be possible to use JMX to change logging configuration in runtime.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Now let’s see what we can do with unified logging and profit from the
insight it gives in the JVM.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_useful_usage_of_unified_logging"><a class="anchor" href="#_useful_usage_of_unified_logging"></a><a class="link" href="#_useful_usage_of_unified_logging">Useful usage of unified logging</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_how_to_use_the_tool_help_from_the_command_line"><a class="anchor" href="#_how_to_use_the_tool_help_from_the_command_line"></a><a class="link" href="#_how_to_use_the_tool_help_from_the_command_line">How to use the tool, help from the command line</a></h3>
<div class="paragraph">
<p>While the JEP explains things, it’s usually not how we get the first contact: We use the
command line help, which is describing just as well how to use on the command line.</p>
</div>
<div class="paragraph">
<p>Also, you may have to enable logs on a running VM, well in this case the <code>jcmd</code> sub-command <code>VM.log</code>
is your tool.</p>
</div>
<div class="listingblock primary">
<div class="title"><code>java</code> command</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ java -Xlog:help
-Xlog Usage: -Xlog[:[selections][:[output][:[decorators][:output-options]]]]
         where &#39;selections&#39; are combinations of tags and levels of the form tag1[+tag2...][*][=level][,...]
         NOTE: Unless wildcard (*) is specified, only log messages tagged with exactly the tags specified will be matched.

Available log levels:
 off, trace, debug, info, warning, error

Available log decorators:
 time (t), utctime (utc), uptime (u), timemillis (tm), uptimemillis (um), timenanos (tn), uptimenanos (un), hostname (hn), pid (p), tid (ti), level (l), tags (tg)
 Decorators can also be specified as &#39;none&#39; for no decoration.

Available log tags:
 add, age, alloc, annotation, aot, arguments, attach, barrier, biasedlocking, blocks, bot, breakpoint, bytecode, cds, census, class, classhisto, cleanup, codecache, compaction, compilation, constantpool, constraints, container, coops, cpu, cset, data, datacreation, dcmd, decoder, defaultmethods, director, dump, ergo, event, exceptions, exit, fingerprint, free, freelist, gc, handshake, hashtables, heap, humongous, ihop, iklass, init, inlining, interpreter, itables, jfr, jit, jni, jvmti, liveness, load, loader, logging, malloc, mark, marking, membername, memops, metadata, metaspace, methodcomparator, mirror, mmu, module, monitorinflation, monitormismatch, nestmates, nmethod, normalize, objecttagging, obsolete, oldobject, oom, oopmap, oops, oopstorage, os, pagesize, parser, patch, path, perf, phases, plab, preorder, preview, promotion, protectiondomain, purge, redefine, ref, refine, region, reloc, remset, resolve, safepoint, sampling, scavenge, setting, smr, stackmap, stacktrace, stackwalk, start, startuptime, state, stats, stringdedup, stringtable, subclass, survivor, sweep, system, table, task, thread, time, timer, tlab, tracking, unload, unshareable, update, verification, verify, vmoperation, vmthread, vtables, vtablestubs, workgang
 Specifying &#39;all&#39; instead of a tag combination matches all tag combinations.

Described tag sets:
 logging: Logging for the log framework itself

Available log outputs:
 stdout/stderr
 file=&lt;filename&gt;
  If the filename contains %p and/or %t, they will expand to the JVM&#39;s PID and startup timestamp, respectively.
  Additional output-options for file outputs:
   filesize=..  - Target byte size for log rotation (supports K/M/G suffix). If set to 0, log rotation will not trigger automatically, but can be performed manually (see the VM.log DCMD).
   filecount=.. - Number of files to keep in rotation (not counting the active file). If set to 0, log rotation is disabled. This will cause existing log files to be overwritten.

Some examples:
 -Xlog
         Log all messages up to &#39;info&#39; level to stdout with &#39;uptime&#39;, &#39;levels&#39; and &#39;tags&#39; decorations.
         (Equivalent to -Xlog:all=info:stdout:uptime,levels,tags).

 -Xlog:gc
         Log messages tagged with &#39;gc&#39; tag up to &#39;info&#39; level to stdout, with default decorations.

 -Xlog:gc,safepoint
         Log messages tagged either with &#39;gc&#39; or &#39;safepoint&#39; tags, both up to &#39;info&#39; level, to stdout, with default decorations.
         (Messages tagged with both &#39;gc&#39; and &#39;safepoint&#39; will not be logged.)

 -Xlog:gc+ref=debug
         Log messages tagged with both &#39;gc&#39; and &#39;ref&#39; tags, up to &#39;debug&#39; level, to stdout, with default decorations.
         (Messages tagged only with one of the two tags will not be logged.)

 -Xlog:gc=debug:file=gc.txt:none
         Log messages tagged with &#39;gc&#39; tag up to &#39;debug&#39; level to file &#39;gc.txt&#39; with no decorations.

 -Xlog:gc=trace:file=gctrace.txt:uptimemillis,pid:filecount=5,filesize=1m
         Log messages tagged with &#39;gc&#39; tag up to &#39;trace&#39; level to a rotating fileset of 5 files of size 1MB,
         using the base name &#39;gctrace.txt&#39;, with &#39;uptimemillis&#39; and &#39;pid&#39; decorations.

 -Xlog:gc::uptime,tid
         Log messages tagged with &#39;gc&#39; tag up to &#39;info&#39; level to output &#39;stdout&#39;, using &#39;uptime&#39; and &#39;tid&#39; decorations.

 -Xlog:gc*=info,safepoint*=off
         Log messages tagged with at least &#39;gc&#39; up to &#39;info&#39; level, but turn off logging of messages tagged with &#39;safepoint&#39;.
         (Messages tagged with both &#39;gc&#39; and &#39;safepoint&#39; will not be logged.)

 -Xlog:disable -Xlog:safepoint=trace:safepointtrace.txt
         Turn off all logging, including warnings and errors,
         and then enable messages tagged with &#39;safepoint&#39; up to &#39;trace&#39; level to file &#39;safepointtrace.txt&#39;.</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title"><code>jcmd</code> command</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ jcmd $(pidof java) help VM.log
6:
VM.log
Lists current log configuration, enables/disables/configures a log output, or rotates all logs.

Impact: Low: No impact

Permission: java.lang.management.ManagementPermission(control)

Syntax : VM.log [options]

Options: (options must be specified using the &lt;key&gt; or &lt;key&gt;=&lt;value&gt; syntax)
        output : [optional] The name or index (#&lt;index&gt;) of output to configure. (STRING, no default value)
        output_options : [optional] Options for the output. (STRING, no default value)
        what : [optional] Configures what tags to log. (STRING, no default value)
        decorators : [optional] Configures which decorators to use. Use &#39;none&#39; or an empty value to remove all. (STRING, no default value)
        disable : [optional] Turns off all logging and clears the log configuration. (BOOLEAN, no default value)
        list : [optional] Lists current log configuration. (BOOLEAN, no default value)
        rotate : [optional] Rotates all logs. (BOOLEAN, no default value)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_unified_logging"><a class="anchor" href="#_configuring_unified_logging"></a><a class="link" href="#_configuring_unified_logging">Configuring unified logging</a></h4>
<div class="paragraph">
<p>From the help and the JEP above here’s what to retain:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Tags</dt>
<dd>
<p>When a log message is shown, it should be associated with a set of tags in the JVM which identify by names: <code>os</code>, <code>gc</code>, <code>modules</code>…​</p>
<div class="ulist">
<ul>
<li>
<p>We can apply different settings for individual tags.</p>
</li>
<li>
<p><code>*</code> denotes <em>wildcard</em> tag match. Not using <code>*</code> means all messages matching exactly the specified tags.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Levels</dt>
<dd>
<p>We can perform logging at different levels. The available levels are <code>error</code>, <code>warning</code>, <code>info</code>, <code>debug</code>, <code>trace</code> and <code>develop</code>.</p>
<div class="paragraph">
<p>To disable logging, use the alternative <code>off</code>.</p>
</div>
</dd>
<dt class="hdlist1">Outputs</dt>
<dd>
<p>The output currently supports 3 types: stdout, stderr, or a text file, which can be set up for log file rotation based on written size and a number of files to rotate (for example: each 10MB, keep 5 files in rotation)</p>
</dd>
<dt class="hdlist1">Decorators</dt>
<dd>
<p>There are more details about the message called decorators. Here is the list:</p>
<div class="ulist">
<ul>
<li>
<p><code>time</code>/<code>timemillis</code>/<code>timenanos</code>: current time and date (ISO-8601 format)</p>
</li>
<li>
<p><code>uptime</code>/<code>uptimemillis</code>/<code>uptimenanos</code>: time since the start of the JVM</p>
</li>
<li>
<p><code>pid</code>: process identifier</p>
</li>
<li>
<p><code>tid</code>: thread identifier</p>
</li>
<li>
<p><code>level</code>: level associated with the log message</p>
</li>
<li>
<p><code>tags</code>: tag associated with the log message</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Default settings</dt>
<dd>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>tag-set: <code>all</code>.</p>
</li>
<li>
<p>level: <code>info</code></p>
</li>
<li>
<p>output: <code>stdout</code></p>
</li>
<li>
<p>decorators: <code>uptime</code>, <code>level</code>, <code>tags</code></p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In practice this will give:</p>
</div>
<div class="listingblock primary">
<div class="title"><code>java</code> command</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-Xlog:pagesize,os*,os+container=trace:file=/var/log/%t-os-container-pagesise.log:uptime,tags,level</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>jcmd</code> command</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-role" secondary"="" hljs"="" data-lang="role" secondary""="">$ jcmd $(pidof java) VM.log output=/var/log/%t-os-container-pagesise.log what=pagesize,os*,os+container=trace decorators=uptime,tags,level</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above commands are equivalent, but note that depending on the specified tags and level, the log content
may be less useful when enabled at a later time. In the above example in particular the <code>os+container=trace</code>
will output some interesting logs only during JVM startup.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tag_set_and_tag_prefixes"><a class="anchor" href="#_tag_set_and_tag_prefixes"></a><a class="link" href="#_tag_set_and_tag_prefixes">Tag set and tag prefixes</a></h4>
<div class="paragraph">
<p>In the rest of the article I will mention two related notions about tags.
Tags are not hierarchic, however, when their use in the JDK code base suggests
there is still some kind of <em>hierarchy</em>.</p>
</div>
<div class="paragraph">
<p>As we’ll see later some tags are standalone tags, but a large proportion of tags
are always logged with other. We could say they are part of a group with a <em>root</em>
tag like <code>gc</code>, <code>class</code>, etc. Those are my observations, but let’s look at the JEP-158 diff.</p>
</div>
<div class="paragraph">
<p>There’s one file that caught attention, it’s
<a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/fc2a1798bac1bfda6929dc55936ba7f9e4cf0208#diff-7cb36a4a80175eed80c087a48e4f071f">logTagSet.hpp</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The tagset represents a combination of tags that occur in a log call somewhere.
Tagsets are created automatically by the LogTagSetMappings and should never be
instantiated directly somewhere else.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>So when one sees a <code>class, path</code> combination it’s in fact a tag set. I will refer to
these as <em>tag-set</em>, <em>tag set</em>, or <em>tagset</em>. And, I’ll use the term <em>log tag root</em>
to indicate that a tag is used as the first tag, it’s generally about a JVM component
like GC, classes, or JFR.</p>
</div>
<div class="paragraph">
<p>There is another construct on top of <em>tagsets</em>, that is called log prefix.
We can learn about it in
<a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/fc2a1798bac1bfda6929dc55936ba7f9e4cf0208#diff-c7fbf2952ef86b686c1849f6735041c9">logPrefix.hpp</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Prefixes prepend each log message for a specified tagset with the given prefix.
A prefix consists of a format string and a value or callback. Prefixes are added
after the decorations but before the log message.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Log prefixes allow it to prepend the log message (that’s the prefix) with something for
declared <em>tagsets</em>. As we’ll see later there is currently only one list of tagsets that uses
the log prefix mechanism, GC logging to print the <em>GC id</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/jdk-11.0.8%2B10/src/hotspot/share/logging/logPrefix.hpp">src/hotspot/share/logging/logPrefix.hpp</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_migrating_the_gc_log_configuration_jep_271"><a class="anchor" href="#_migrating_the_gc_log_configuration_jep_271"></a><a class="link" href="#_migrating_the_gc_log_configuration_jep_271">Migrating the GC log configuration (JEP-271)</a></h3>
<div class="paragraph">
<p>While this topic may seem covered by other blogs I wasn’t satisfied by the actual
equivalence or not of the log configuration. I got the configuration wrong <em>as in incomplete</em>
several times until I decided to dive in.</p>
</div>
<div class="paragraph">
<p>GC unified logging is covered by another JEP, <a href="https://openjdk.java.net/jeps/271">JEP 271: Unified GC Logging</a>,
which relies on JEP-158 as mentioned earlier. However, this JEP is much more concise and
barely describes how the previous logging option will be turned in unified logs.</p>
</div>
<div class="paragraph">
<p>One of the best source came from <a href="https://twitter.com/poonam_bajaj">Poonam Bajaj Parhar</a>&#39;s talk on
<a href="https://www.slideshare.net/PoonamBajaj5/lets-learn-to-talk-to-gc-logs-in-java-9">unified GC logs</a>
However the most interesting data is not searchable because it’s an image of a table and
everything is not there, for the poor souls that need to work with other GCs.</p>
</div>
<div class="paragraph">
<p>The basic translation of the following usual GC logging configuration:</p>
</div>
<div class="listingblock">
<div class="title">pre-jdk9</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-XX:+PrintGCDetails                           \
-XX:+PrintGCApplicationStoppedTime            \
-XX:+PrintGCApplicationConcurrentTime         \
-XX:+PrintGCCause                             \
-XX:+PrintGCID                                \
-XX:+PrintTenuringDistribution                \
-XX:+PrintGCDateStamps                        \
-XX:+UseGCLogFileRotation                     \
-XX:NumberOfGCLogFiles=5                      \
-XX:GCLogFileSize=10M                         \
-Xloggc:/var/log/`date +%FT%H-%M-%S`-gc.log   \</code></pre>
</div>
</div>
<div class="paragraph">
<p>These flags could be translated to the following configuration:</p>
</div>
<div class="listingblock primary">
<div class="title">log config</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-Xlog:gc*,gc+heap=debug,gc+ref=debug,gc+ergo*=trace,gc+age*=trace,gc+phases*=debug,safepoint*:file=/var/log/%t-gc.log:uptime,tags,level:filecount=10,filesize=20M</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">log config breakdown</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-Xlog:
  gc*, <i class="conum" data-value="1"></i><b>(1)</b>
  gc+heap=debug, <i class="conum" data-value="2"></i><b>(2)</b>
  gc+ref=debug, <i class="conum" data-value="3"></i><b>(3)</b>
  gc+ergo*=trace, <i class="conum" data-value="4"></i><b>(4)</b>
  gc+age*=trace, <i class="conum" data-value="5"></i><b>(5)</b>
  gc+phases*=debug, <i class="conum" data-value="6"></i><b>(6)</b>
  safepoint* <i class="conum" data-value="7"></i><b>(7)</b>
  :file=/var/log/%t-gc.log <i class="conum" data-value="8"></i><b>(8)</b>
  :time,tags,level <i class="conum" data-value="9"></i><b>(9)</b>
  :filecount=5,filesize=10M <i class="conum" data-value="10"></i><b>(10)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>PrintGCDetails</code> (remember that default level is <code>info</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>PrintHeapAtGC</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>PrintReferenceGC</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>PrintAdaptiveSizePolicy</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>PrintTenuringDistribution</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>PrintParallelOldGCPhaseTimes</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>PrintGCApplicationConcurrentTime</code> and <code>PrintGCApplicationStoppedTime</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>Xloggc</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><code>PrintGCDateStamps</code> (but also decorates with tags and level, useful to know identify the source of the log).</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><code>UseGCLogFileRotation</code>, <code>NumberOfGCLogFiles</code>, <code>GCLogFileSize</code></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Note that some options do not have equivalents in unified GC logging.
Either because the tag system is more precise, or because the log message
themselves changed, e.g. the GC cause and the GC id are now always logged.</p>
</div>
<div class="paragraph">
<p>Now it’s the right opportunity to warn about the slight caveats of this log configuration.</p>
</div>
<div class="paragraph">
<p>This configuration is fine and works reasonably well, BUT this configuration
actually may miss some logs like some <code>ihop</code>, which is not only logged with the <code>ergo</code> tag
as we’ll see.</p>
</div>
<div class="sect3">
<h4 id="_exhaustive_translation_table"><a class="anchor" href="#_exhaustive_translation_table"></a><a class="link" href="#_exhaustive_translation_table">Exhaustive translation table</a></h4>
<div class="paragraph">
<p>I extracted the following table from the actual patches that implemented JEP-271, see
<a href="https://bugs.openjdk.java.net/browse/JDK-8059805">JDK-8059805</a>,
<a href="https://bugs.openjdk.java.net/browse/JDK-8145092">JDK-8145092</a>, and in particular the
<a href="https://hg.openjdk.java.net/jdk9/jdk9/hotspot/rev/f944761a3ce3">related diff</a> <a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/d724e8a3489f8ebb57c7bbf82784a2b2d537fdc8">(on github)</a>.</p>
</div>
<div class="paragraph">
<p>In a lesser way I used the official <a href="https://docs.oracle.com/javase/9/tools/java.htm#JSWOR-GUID-BE93ABDC-999C-4CB5-A88B-1994AAAC74D5"><code>java</code> documentation</a>,
which I found somewhat lacking in this regard.</p>
</div>
<div class="paragraph">



<div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Exhaustive GC logging option translation table (with some caveats)</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old GC log flags usually set with <code>-XX:+…​</code></th>
<th class="tableblock halign-left valign-top"><code>Equivalent</code> tags with log level</th>
<th class="tableblock halign-left valign-top">Definition of the the old flag</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGC -Xloggc:&lt;gc-log-file-path&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print message at garbage collection</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCDetails -Xloggc:&lt;gc-log-file-path&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc*</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print more details at garbage collection</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-verbose:gc</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc=trace</code> <code>gc+heap=trace</code> <code>gc+heap+exit=trace</code> <code>gc+metaspace=trace</code> <code>gc+sweep=debug</code> <code>gc+heap+ergo=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Verbose GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCCause</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>GC</code> cause is now always logged</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Include GC cause in GC logging</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCID</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>GC</code> ID is now always logged</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print an identifier for each garbage collection</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCApplicationStoppedTime</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>safepoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print the time the application has been stopped</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCApplicationConcurrentTime</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>safepoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print the time the application has been running</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintTenuringDistribution</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+age*=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print tenuring age information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintAdaptiveSizePolicy</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+ergo*=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print information about AdaptiveSizePolicy</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintHeapAtGC</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+heap=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print heap layout before and after each GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintHeapAtGCExtended</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+heap=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print extended information about the layout of the heap when -XX:+PrintHeapAtGC is set</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintClassHistogramBeforeFullGC</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>classhisto*=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print a class histogram before any major stop-world GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintClassHistogramAfterFullGC</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>classhisto*=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print a class histogram after any major stop-world GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintStringDeduplicationStatistics</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+stringdedup*=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print string deduplication statistics</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintJNIGCStalls</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+jni=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print diagnostic message when GC is stalled by JNI critical section</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintReferenceGC</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+ref=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print times spent handling reference objects during GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCTaskTimeStamps</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>task*=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print timestamps for individual gc worker thread tasks</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintTaskQueue</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+task+stats=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print taskqueue statistics for parallel collectors</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintPLAB</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+plab=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print (survivor space) promotion LAB’s sizing decisions</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintOldPLAB</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+plab=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print (old gen) promotion LAB’s sizing decisions</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintPromotionFailure</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+promotion=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print additional diagnostic information following promotion failure</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintTLAB</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+tlab=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print various TLAB related information (augmented with <code>-XX:+TLABStats</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintTerminationStats</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+task+stats=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print termination statistics for parallel collectors</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1PrintHeapRegions</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+region=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set G1 will print information on which regions are being allocated and which are reclaimed</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1PrintRegionsLivenessInfo</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+liveness=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Prints the liveness information for all regions in the heap at the end of a marking cycle</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1SummarizeConcMark</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+marking=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Summarize concurrent mark info</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1SummarizeRSets</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+remset*=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Summarize remembered set processing info</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1TraceConcRefinement</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+refine=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace G1 concurrent refinement</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1TraceEagerReclaimHumongousObjects</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+humongous=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print some information about large object liveness at every young GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G1TraceStringSymbolTableScrubbing</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+stringdedup=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace information string and symbol table scrubbing</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintParallelOldGCPhaseTimes</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+phases=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print the time taken by each phase in ParallelOldGC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CMSDumpAtPromotionFailure</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+promotion=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Dump useful information about the state of the CMS old generation upon a promotion failure (complemented by flags <code>CMSPrintChunksInDump</code> or <code>CMSPrintObjectsInDump</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CMSPrintEdenSurvivorChunks</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+heap=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Print the eden and the survivor chunks used for the parallel initial mark or remark of the eden/survivor spaces</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintCMSInitiationStatistics</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Statistics for initiating a CMS collection</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintCMSStatistics</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc=debug</code> (<code>trace</code>) <code>gc+task=trace</code> <code>gc+survivor=trace</code> <code>log+sweep=debug</code> (<code>trace</code>)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Statistics for CMS (complemented by <code>CMSVerifyReturnedBytes</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintFLSCensus</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+freelist+census=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Census for CMS&#39; FreeListSpace</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintFLSStatistics</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+freelist+stats=debug</code> (<code>trace</code>) <code>gc+freelist*=debug</code> (<code>trace</code>)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Statistics for CMS&#39; FreeListSpace</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceCMSState</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+state=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace the state of the CMS collection</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceSafepoint</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>safepoint=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace application pauses due to VM operations in safepoints</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceSafepointCleanupTime</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>safepoint+cleanup=info</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>break down of clean up tasks performed during safepoint</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceAdaptativeGCBoundary</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>heap+ergo=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace young-old boundary moves</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceDynamicGCThreads</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+task=trace</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace the dynamic GC thread usage</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceMetadataHumongousAllocation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+metaspace+alloc=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace humongous metadata allocations</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VerifySilently</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc+verify=debug</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Do not print the verification progress</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>

</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. old options are now decorators</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCDateStamps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PrintGCTimeStamps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uptime</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_caveat_when_using_this_translation_table"><a class="anchor" href="#_caveat_when_using_this_translation_table"></a><a class="link" href="#_caveat_when_using_this_translation_table">Caveat when using this translation table</a></h4>
<div class="paragraph">
<p>I noticed while analyzing GC logs with the above unified logging configuration that some logs
I expected were missing, and while doing this translation table I identified the log statements
I expected. They had a different <em>tag set</em>.</p>
</div>
<div class="paragraph">
<p>On the example of heap occupancy logs (IHOP), it was logged with <code>PrintAdaptiveSizePolicy</code>
and now it’s supposed to be logged as part of the GC ergonomics by setting <code>gc+ergo*</code> to <code>trace</code>.
Looking at the code, I noticed the <code>ihop</code> tag is not always combined with <code>ergo</code>.</p>
</div>
<div class="paragraph">
<p>This tag is not the only one, in the <a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/d724e8a3489f8ebb57c7bbf82784a2b2d537fdc8">diff</a>
I mentioned previously there’s an interesting file that declares GC <em>log prefix</em> for a list of <em>tag-sets</em>.
<em>The diff is huge and may take some time to load, search for the following file
<a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/d724e8a3489f8ebb57c7bbf82784a2b2d537fdc8#diff-c7fbf2952ef86b686c1849f6735041c9">src/share/vm/logging/logPrefix.hpp</a>.</em></p>
</div>
<div class="paragraph">
<p>Also, some logging tags are common to multiple GC. While there is nothing wrong in this, it’s easy
to update the logging configuration when changing the GC algorithm, e.g. using CMS then switch to G1GC.
I would have preferred an additional tag for each GC algorithms (<code>g1</code> for g1GC, <code>cms</code> for Concurrent Mark
and Sweep,<code>shenandoah</code> for Shenandoah, etc) that would have allowed to configure logging this way
<code>-Xlog:zgc=info*</code>. Unfortunately this is only a dream at this time.</p>
</div>
<div class="paragraph">
<p>Moreover, JDK maintainers improve the JVM sub-systems logging over time, possibly backporting improvements.
This makes the tag selection hard to use properly and tedious to maintain. Very few will <em>grep</em> the
JDK code base to track which tag they need to tune GCs which is already arcane enough.</p>
</div>
<div class="paragraph">
<p>I believe that if we configure/select tags too restrictively it might be counter-productive.</p>
</div>
</div>
<div class="sect3">
<h4 id="_embracing_unified_logging_for_gc_logs"><a class="anchor" href="#_embracing_unified_logging_for_gc_logs"></a><a class="link" href="#_embracing_unified_logging_for_gc_logs">Embracing unified logging for GC logs</a></h4>
<div class="paragraph">
<p>This led me to think that instead of trying to <em>mimic</em> old logging options, I should instead
prefer to log more tags and simplify the overall logging configuration.</p>
</div>
<div class="listingblock primary">
<div class="title">log config</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-Xlog:gc*=debug,gc+ergo*=trace,gc+age*=trace,safepoint*:file=/gclogs/%t-gc.log:uptime,tags,level:filecount=10,filesize=20M</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">log config breakdown</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">-Xlog:
  gc*=debug, <i class="conum" data-value="1"></i><b>(1)</b>
  gc+ergo*=trace, <i class="conum" data-value="2"></i><b>(2)</b>
  gc+age*=trace, <i class="conum" data-value="3"></i><b>(3)</b>
  safepoint*
  :file=/gclogs/%t-gc.log:uptime,tags,level:filecount=10,filesize=20M</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Logs everything under <code>gc</code> at <code>debug</code> level.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specific <em>tagset</em> level configuration for ergonomics.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specific <em>tagset</em> level configuration for tenuring distribution.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The above configuration is simpler at the expense of possibly larger file size.
Also, using <code>gc*=debug</code> allows it to catch extra tags, and possibly new <code>gc</code> related tags
that show up. In my opinion this configuration does not have any caveats.</p>
</div>
<div class="paragraph">
<p>And as mentioned I benefited from other tags under <code>gc</code> that I wasn’t even looking
at before because I simply didn’t think to enable the logging option,
like <code>PrintJNIGCStalls</code> in pre-jdk9 <code>jni</code> tag in unified logging or dreaded humongous
allocations in G1GC via the <code>humongous</code> tag.
In short this simpler configuration enabled more logging, which means GC analysis tool
can spot other useful information.</p>
</div>
<div class="ulist">
<div class="title">GC tagsets with <code>gc*=debug</code> configuration</div>
<ul>
<li>
<p><code>gc,age</code></p>
</li>
<li>
<p><code>gc,alloc,region</code></p>
</li>
<li>
<p><code>gc,cpu</code></p>
</li>
<li>
<p><code>gc,ergo</code></p>
</li>
<li>
<p><code>gc,ergo,cset</code></p>
</li>
<li>
<p><code>gc,ergo,ihop</code></p>
</li>
<li>
<p><code>gc,ergo,refine</code></p>
</li>
<li>
<p><code>gc,heap</code></p>
</li>
<li>
<p><code>gc,humongous</code></p>
</li>
<li>
<p><code>gc,ihop</code></p>
</li>
<li>
<p><code>gc,jni</code></p>
</li>
<li>
<p><code>gc,marking</code></p>
</li>
<li>
<p><code>gc,metaspace</code></p>
</li>
<li>
<p><code>gc,mmu</code></p>
</li>
<li>
<p><code>gc,phases</code></p>
</li>
<li>
<p><code>gc,phases,ref</code></p>
</li>
<li>
<p><code>gc,phases,start</code></p>
</li>
<li>
<p><code>gc,plab</code></p>
</li>
<li>
<p><code>gc,ref</code></p>
</li>
<li>
<p><code>gc,ref,start</code></p>
</li>
<li>
<p><code>gc,refine</code></p>
</li>
<li>
<p><code>gc,remset,tracking</code></p>
</li>
<li>
<p><code>gc,start</code></p>
</li>
<li>
<p><code>gc,stats</code></p>
</li>
<li>
<p><code>gc,stringdedup</code></p>
</li>
<li>
<p><code>gc,stringtable</code></p>
</li>
<li>
<p><code>gc,task</code></p>
</li>
<li>
<p><code>gc,task,stats</code></p>
</li>
<li>
<p><code>gc,tlab</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_try_gc_logging_configurations"><a class="anchor" href="#_try_gc_logging_configurations"></a><a class="link" href="#_try_gc_logging_configurations">Try GC logging configurations</a></h4>
<div class="paragraph">
<p>Unlike <code>os</code> and <code>container</code> logs, GC happens almost continuously. This opens the opportunity
to try log configurations at runtime using <code>jcmd</code>. In the example below I wanted to monitor
more thoroughly G1GC regions:</p>
</div>
<div class="listingblock">
<div class="title">Activate a new log configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">jcmd $(pidof java) \
  VM.log \
    what=&#34;gc*=debug,gc+ergo*=trace,gc+age*=trace,gc+region=trace,gc+liveness=trace,safepoint*&#34; \
    decorators=time,tags,level \
    output=&#34;file=/var/log/%t-gc-region-tracing.log&#34; \
    output_options=&#34;filecount=10,filesize=20M&#34;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_migrating_other_options"><a class="anchor" href="#_migrating_other_options"></a><a class="link" href="#_migrating_other_options">Migrating other options</a></h3>
<div class="paragraph">
<p>One thing I used to log is about classes, particularly during development.
Especially loading and unloading. I used this a lot while debugging some aspects of Mockito
and some application servers back in the days.</p>
</div>
<div class="paragraph">
<p>Some of the <code>Trace*</code> options are still present, even in JDK 14, although they output a warning.</p>
</div>
<div class="paragraph">



<div class="table-wrapper">
    <table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Other tracing option translation</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassInitialization</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+init=info</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassLoading</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+load=info</code> (<code>debug)</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassLoadingPreorder</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+preorder=debug</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassUnloading</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+unload=info</code> (<code>trace</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassPaths</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+path=info</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassResolution</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+resolve=debug</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceLoaderConstraints</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+loader+constraints=info</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceClassLoaderData</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class+loader+data=debug</code> (<code>trace</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceRedefineClasses</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine+class*=info</code> (<code>debug</code>, <code>trace</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceMonitorInflation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>monitorinflation=debug</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceBiasedLocking</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>biasedlocking=info</code> (<code>trace</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceExceptions</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>exceptions=info</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TraceJVMTIObjectTagging</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jvmti+objecttagging=debug</code></p>
</div></div></td>
</tr>
</tbody>
</table>

</div>

</div>
<details>
<summary class="title">Tracing option declaration in the JVM code base</summary>
<div class="content">
<div class="listingblock">
<div class="title"><a href="https://github.com/openjdk/jdk11u/blob/a4f2cc65079328cb428cf0317df39af93472ab1e/src/hotspot/share/runtime/arguments.cpp#L596-L630">src/hotspot/share/runtime/arguments.cpp</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// NOTE: A compatibility request will be necessary for each alias to be removed.
static AliasedLoggingFlag const aliased_logging_flags[] = {
  { &#34;PrintCompressedOopsMode&#34;,   LogLevel::Info,  true,  LOG_TAGS(gc, heap, coops) },
  { &#34;PrintSharedSpaces&#34;,         LogLevel::Info,  true,  LOG_TAGS(cds) },
  { &#34;TraceBiasedLocking&#34;,        LogLevel::Info,  true,  LOG_TAGS(biasedlocking) },
  { &#34;TraceClassLoading&#34;,         LogLevel::Info,  true,  LOG_TAGS(class, load) },
  { &#34;TraceClassLoadingPreorder&#34;, LogLevel::Debug, true,  LOG_TAGS(class, preorder) },
  { &#34;TraceClassPaths&#34;,           LogLevel::Info,  true,  LOG_TAGS(class, path) },
  { &#34;TraceClassResolution&#34;,      LogLevel::Debug, true,  LOG_TAGS(class, resolve) },
  { &#34;TraceClassUnloading&#34;,       LogLevel::Info,  true,  LOG_TAGS(class, unload) },
  { &#34;TraceExceptions&#34;,           LogLevel::Info,  true,  LOG_TAGS(exceptions) },
  { &#34;TraceLoaderConstraints&#34;,    LogLevel::Info,  true,  LOG_TAGS(class, loader, constraints) },
  { &#34;TraceMonitorInflation&#34;,     LogLevel::Debug, true,  LOG_TAGS(monitorinflation) },
  { &#34;TraceSafepointCleanupTime&#34;, LogLevel::Info,  true,  LOG_TAGS(safepoint, cleanup) },
  { &#34;TraceJVMTIObjectTagging&#34;,   LogLevel::Debug, true,  LOG_TAGS(jvmti, objecttagging) },
  { &#34;TraceRedefineClasses&#34;,      LogLevel::Info,  false, LOG_TAGS(redefine, class) },
  { NULL,                        LogLevel::Off,   false, LOG_TAGS(_NO_TAG) }
};

#ifndef PRODUCT
// These options are removed in jdk9. Remove this code for jdk10.
static AliasedFlag const removed_develop_logging_flags[] = {
  { &#34;TraceClassInitialization&#34;,   &#34;-Xlog:class+init&#34; },
  { &#34;TraceClassLoaderData&#34;,       &#34;-Xlog:class+loader+data&#34; },
  { &#34;TraceDefaultMethods&#34;,        &#34;-Xlog:defaultmethods=debug&#34; },
  { &#34;TraceItables&#34;,               &#34;-Xlog:itables=debug&#34; },
  { &#34;TraceMonitorMismatch&#34;,       &#34;-Xlog:monitormismatch=info&#34; },
  { &#34;TraceSafepoint&#34;,             &#34;-Xlog:safepoint=debug&#34; },
  { &#34;TraceStartupTime&#34;,           &#34;-Xlog:startuptime&#34; },
  { &#34;TraceVMOperation&#34;,           &#34;-Xlog:vmoperation=debug&#34; },
  { &#34;PrintVtables&#34;,               &#34;-Xlog:vtables=debug&#34; },
  { &#34;VerboseVerification&#34;,        &#34;-Xlog:verification&#34; },
  { NULL, NULL }
};
#endif //PRODUCT</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_building_a_unified_logging_tag_reference"><a class="anchor" href="#_building_a_unified_logging_tag_reference"></a><a class="link" href="#_building_a_unified_logging_tag_reference">Building a unified logging tag reference</a></h3>
<div class="paragraph">
<p>Ok nice, but <code>java -Xlog:help</code> lists a lot more available tags than those already mentioned.</p>
</div>
<div class="paragraph">
<p>The issue with unified logging is the documentation: identifying the tag we want
can be tedious. If I select the tag <code>dump</code> what will it output and when, is it about heap dump?
Same if I select <code>system</code>: is it about system calls, or else? Well it turns out there’s just
no documentation whatsoever, you need to look at the code.</p>
</div>
<div class="paragraph">
<p>The starting point for this job was <a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/d724e8a3489f8ebb57c7bbf82784a2b2d537fdc8">this commit</a>
and what the JEP-158 proposed:</p>
</div>
<div class="paragraph">



<div class="table-wrapper">
    <div class="quoteblock">
<div class="title">JEP-158</div>
<blockquote>
<div class="paragraph">
<p><strong>JVM interface</strong></p>
</div>
<div class="paragraph">
<p>In the JVM a set of macros will be created with an API similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">log_&lt;level&gt;(Tag1[,...])(fmtstr, ...)
    syntax for the log macro</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">log_info(gc, rt, classloading)(&#34;Loaded %d objects.&#34;, object_count)
    the macro is checking the log level to avoid uneccessary
    calls and allocations.

log_debug(svc, debugger)(&#34;Debugger interface listening at port %d.&#34;, port_number)</code></pre>
</div>
</div>
</blockquote>
</div>

</div>

</div>
<div class="paragraph">
<p>The idea of this section is to <em>build</em> a logging tag reference. For that
I needed grep and the hotspot repo. I build this reference on the code found in
11.0.7, but I don’t think there was any change in 11.0.8; please keep in mind this is
only a snapshot and it’s likely that tags get added or changed in later JVM revisions.</p>
</div>
<div class="paragraph">
<p>In the commit above there’s an interesting file
<a href="https://github.com/corretto/corretto-11/blob/2750418af3603bcb10ba5e933a7198f21b78361d/src/src/hotspot/share/logging/logTag.hpp">src/hotspot/share/logging/logTag.hpp</a>
that declares all logging tags (138 in total). From there I searched where these tags where used.</p>
</div>
<div class="paragraph">



<div class="table-wrapper">
    <table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 1. Log tags</caption>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs when methods are redefined.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>age</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC tenuring distribution and related statistics.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alloc</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC region or space allocation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>annotation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about annotation during redefinition, this tag appear to be only combined with <code>redefine</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aot</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>aot</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ahead Of Time mechanism logs.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JVM options warnings or errors (only errors, unless level is <code>trace</code>), e.g. when using a deprecated logging option that should use unied logging instead.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attach</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JVM attachment listener</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>barrier</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>,xxx</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC Write barrier coverage</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>biasedlocking</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Biased Locking mechanism <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/runtime/biasedLocking.hpp">src/hotspot/share/runtime/biasedLocking.hpp</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blocks</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>oopstorage</code>, <code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bot</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Block Offset Table (side data structure with offset information indicating how far back the GC needs to go to find the beginning of an object).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>breakpoint</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jvmti</code> (Redefinition)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Breakpoint setting or clearing Part of the JVMTI, but logged under <code>redefine</code> <em>log tag root</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bytecode</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about bytecode modifications performed by <code>JFR</code>, always combined with <code>jfr</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cds</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class Data Sharing logs</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>census</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CMS log about <code>freelist</code> information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>aot</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class related information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classhisto</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleanup</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>safepoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Safepoint cleaning information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>codecache</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>codecache</code>, <code>compilation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>code cache for generated code: compiled java methods, runtime stubs, transition frames, etc. Segregated in 3 heaps (Non-nmethods like Buffers, Adapters and Runtime Stubs, nmethods that are profiled, nmethods that are not profiled). <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/code/codeCache.cpp">src/hotspot/share/code/codeCache.cpp</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>compaction</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC compaction for G1GC and Parallel</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>compilation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>compilation</code>, <code>jit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compilation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constantpool</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Constant pool, logged mostly during <code>redefine</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraints</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class loader constraints</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>container</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>os</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container (CGroup) related (<code>cpu</code>, <code>cpuset</code>, <code>memory</code>, <code>mountinfo</code>, …​)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>coops</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compressed ordinary object pointers</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cpu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>, <code>os</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CPU features when logged with <code>os</code>, CPU time ith <code>gc</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cset</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Collection Set in G1</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Classloader data (allocation space, or metaspace)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datacreation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>perf</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Related to perf data creation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dcmd</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JFR Diagnostic commands logs always combined with the <em>log tag root</em> by <code>jfr</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decoder</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Related to ELF decoding (Executable and Linkable Format) on Linux.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultmethods</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Runtime support for default method. Part of classes, but logged as a standalone tag.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>director</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Related to ZGC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dump</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Redefinition debug logging about old or obsolete method after redefinition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ergo</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ergonomics, usually combined with <code>gc</code>, but can be found alone (e.g. for 2 logs about thread local handshakes)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>event</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>About JFR events</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exceptions</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>exceptions</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>About Java exceptions handling in different parts (interpreter, during safepoint, compiler, …​). Specific exception handling during redefined class loading when combined with <code>redefine</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exit</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC/heap related information after GC. <code>LogStreamHandle(Debug, gc, heap, exit) lsh;</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/gc/shared/genCollectedHeap.cpp">src/hotspot/share/gc/shared/genCollectedHeap.cpp</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fingerprint</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>aot</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class fingerprinting</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>free</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>malloc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Log any C stdlib <code>malloc</code>, <code>realloc</code> or <code>free</code> calls, always logged via <code>malloc, free</code> tags.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>freelist</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Chunks of memory that are supposed to be free, for CMS and metaspace</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gc</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC log tag <em>root</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>handshake</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>thread</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Thread local handshakes <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/runtime/handshake.hpp#L35-L39">src/hotspot/share/runtime/handshake.hpp</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hashtables</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When standalone, it’s the internal bucketed hash table, far cousin of a <code>HashMap</code>, Hotspot uses it for strings, and other symbols. CDS uses another internal implementation for statistics, hence this tag may be combined with <code>cds</code> <em>log tag root</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heap</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Various GC heap related logs</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>humongous</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Humongous objects in G1GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ihop</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Heap occupancy (initial, current, target) in G1GC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iklass</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Internal class instance representation, <em>log tag roots</em> : <code>redefine</code>, <code>classes</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>init</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>, <code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mostly about class initialization when <code>log tag root</code> is <code>class</code>. About ZGC initialization when combined with <code>gc</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inlining</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Method inlining information</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>interpreter</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>interpreter</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Interpreter logs, only logs with <code>oopmap</code> and <code>safepoint</code> sub-tags.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>itables</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JVM virtual call mechanism for interface calls, during JVM development (non-product build needed). Also see <code>vtables</code> tag. <a href="https://wiki.openjdk.java.net/display/HotSpot/InterfaceCalls" title="Interface calls">Hotspot wiki</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jfr</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JDK Flight Recorder</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jit</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about method <code>inlining</code> and <code>compilation</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jni</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only logged during <em>GC locker</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jvmti</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jvmti</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>liveness</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>G1GC region liveness (dead objects vs live objects)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>, <code>class</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace all classes loaded, including the redefined ones.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loader</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class loader <code>data</code> and <code>constraints</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>About unified logging</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>malloc</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>malloc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Log any C stdlib <code>malloc</code>, <code>realloc</code> or <code>free</code> calls, always logged via <code>malloc, free</code> tags.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mark</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mark <code>obsolete</code> method during <code>redefine</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marking</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Marking information for G1GC, CMS, ZGC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>membername</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Hashtable used by redefinition to replace methods. Used in conjunction with <code>table</code>, but without <code>redefine</code> <em>log tag root</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memops</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>perf</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Memory operation logs <code>initialize</code> and <code>mmap_attach_shared</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about class redefinition when <em>log tag root</em> is <code>redefine</code>. Or logs about JFR event metadata, when log tag root is <code>jfr</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metaspace</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about the metaspace memory space</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>methodcomparator</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about method equivalence during redefinition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mirror</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about <code>cds</code> processing of class mirror. A java mirror is an instance of a <code>java.lang.Class</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>Minimum Mutator Utilization</em> is the (time) goal of GC work for G1GC and ZGC. G1GC defines this as a pause time goal (<code>MaxGCPauseMillis</code>) over a time slice (<code>GCPauseIntervalMillis</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>module</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Module system</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>monitorinflation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Runtime synchronization support</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>monitormismatch</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Monitor matching failures during OopMapGeneration</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nestmates</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Nestmate attributes logging logging, seen with <em>log tag roots</em> <code>class</code> or <code>redefine</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nmethod</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>, <code>class</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Native methods (as in compiled code versions of Java methods) logs in various subsystems: <code>gc</code>, <code>class</code>, <code>redefine</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>normalize</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs after method addition, deletion, replacement during redefinition</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>objecttagging</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jvmti</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JVMTI object tagging calls</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>obsolete</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Obsolete method entry mainly for redefinition (and JVMTI)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oldobject</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Old object sampling, currently only logging that a sample was skipped due to lock contention. <em>Log tag root</em> is <code>jfr</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oom</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reported when <code>metaspace</code> is out of memory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oopmap</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>interpreter</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs on Ordinary Object Pointer caching, combined with by <code>interpreter</code> and <code>redefine</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oops</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ordinary Object Pointers logs in CMS and ZGC</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oopstorage</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Internal off-heap data structure for management of references to objects allocated in the Java heap</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>os</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>os</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operating System interactions logs.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pagesize</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about page size. Standalone tag.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Event used in the JFR parser when reading a recording. <em>Log tag root</em> is <code>jfr</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patch</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>module</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logging <code>--patch-module</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class path or module path processing</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>perf</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>perf</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about JVM perf counters. But when combined with <code>stringtable</code> it’s about interned strings (<code>String.intern()</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phases</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs that is part of phase of a GC, in particular for ZGC and G1GC.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>plab</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about per-GC-thread allocation buffer, those are used during GC to prevent thread competition on the same memory space.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preorder</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace all classes loaded in order referenced (not loaded)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preview</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace loading of preview feature types</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>promotion</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object promotion logs during GC.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>protectiondomain</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class protection domain verification.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>purge</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about previous class version unloading during redefinition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redefine</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class redefinition sub-subsystem, in particular for JVMTI (e.g. when debugging) and with Java agent doing class transformation / re-transformation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ref</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC object or class references related logs</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>refine</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>G1GC logs about refinement threads of the RSet (Remembered set)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>region</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>G1GC logs about region. The <code>alloc</code> and <code>heap</code> combination at <code>debug</code> level will print region statistics, <code>trace</code> level logs the actions and more details that the GC performs on a region.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reloc</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ZGC object set relocation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remset</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>G1GC remembered set. The <code>tracking</code> and <code>exit</code> tag can come along if level is <code>trace</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resolve</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>aot</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about constant pool resolutions, e.g. when loading classes, lambdas, doing reflection, jni</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>safepoint</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>safepoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JVM stop-the-world operations Heap Dump, some GC tasks, de-optimization, biased locking revocation, library loading, etc…​
(<a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/runtime/vm_operations.hpp#L42-L134">src/hotspot/share/runtime/vm_operations.hpp</a>,
the operation in this enum are not all in safepoint though). Specific operation logs can be logged with the standalone <code>vmoperation</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sampling</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Old object sampling in JFR. <code>trace</code> level only.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scavenge</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CMS, Parallel, and Serial GC scavenge traces.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setting</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Part of <code>jfr</code>, mostly about JFR configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smr</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>thread</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Thread Safe Memory Reclamation (Thread-SMR), <a href="https://en.wikipedia.org/wiki/Hazard_pointer">hazard pointers</a>. <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/runtime/threadSMR.cpp">src/hotspot/share/runtime/threadSMR.cpp</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stackmap</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Constant pool changes in method stackmap during redefinition</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stacktrace</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logged during <code>Throwable.fillInStackTrace()</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stackwalk</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs when using <code>StackWalker</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>start</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>, <code>codecache</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates a ZGC phase start, thus it’s combined with <code>gc</code>. But can also indicate other operation start, like for <code>codecache</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startuptime</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs the JVM subsystems startup time (interpreter, GC, module systems, class loading, aot, genesis which is about memory zones …​)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CMS GC states.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stats</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC stats logs. Also seen with (<code>oopstorage, blocks</code> <em>tag set</em>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stringdedup</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>G1GC string deduplication (for old generation)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stringtable</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>About interned strings (<code>String.intern()</code>), can be seen with the <code>gc</code> <em>log tag root</em> when G1GC is in use to log string and symbol cleanups.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subclass</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sub-class unloading. Affected subclasses during redefinition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>survivor</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CMS GC survivor information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sweep</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code>, <code>codecache</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CMS GC sweeping activity. And code cache native methods flushing depending on the <em>log tag root</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>system</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jfr</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JFR system logging, recording start/stop, emergency dump, etc.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>membername</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only used with <code>membername</code>, about the hashtable to record methods, and replace them during redefinition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mostly related to GC tasks, useful to see the <code>phases</code> tag. Also appears combined with <code>handshake</code> for thread local handshakes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>thread</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>os</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When used as a <em>log tag root</em>, it’s about <code>smr</code>, when it’s combined with the <code>os</code> log tag root it’s about the thread lifecycle and guards.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>time</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Timed Parallel GC operations</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>thread</code>, <code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Timed redefine operation, and thread exit</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tlab</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Thread local allocation buffers statistics (<code>trace</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tracking</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>G1GC remembered set tracking</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unload</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>class</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Class or module unloading</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unshareable</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cds</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For classes that cannot be shared, especially interesting during CDS archive creation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>update</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>redefine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs about redefinition changes in classes, methods, constant pool, vtable, itable, etc.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verification</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Classes bytecode verifier, when standalone. Same for classes in CDS archive when combined with <code>cds</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verify</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Verification operations done during GC operations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vmoperation</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Logs VM operations</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vmthread</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JVM threads that perform the VM operations (usually during safepoints)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vtables</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Java’s virtual calls mechanism (virtual table allows to find the right method address for the current instance in a hierarchy of classes). Those that did C++ before will remember.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vtablestubs</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Java’s virtual calls mechanism that is used for megamorphic call sites (i.e. when the method to execute is not the same on successive executions because the object hierarchy differ). Hotspot wiki <a href="https://wiki.openjdk.java.net/display/HotSpot/PerformanceTechniques" title="Performance technics">1</a> <a href="https://wiki.openjdk.java.net/display/HotSpot/VirtualCalls" title="Virtual calls">2</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>workgang</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gc</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>GC worker threads.</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>

</div>
<div class="paragraph">
<p>In building this reference we see that some JVM sub-systems can output a lot of logs.
Two subsystems stands out in the way they describe their <em>tagsets</em>: JFR and the Garbage Collection:</p>
</div>
<details>
<summary class="title">JFR tag sets</summary>
<div class="content">
<div class="listingblock">
<div class="title"><a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/e68804acbb0c9c66931a7c494a6722efc0eefb1c#diff-d3a85490aacada1ec0d907692afcd069">src/hotspot/share/jfr/utilities/jfrLogTagSets.hpp</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#define JFR_LOG_TAG_SET_LIST \
  JFR_LOG_TAG(jfr) \
  JFR_LOG_TAG(jfr, system) \
  JFR_LOG_TAG(jfr, system, event) \
  JFR_LOG_TAG(jfr, system, setting) \
  JFR_LOG_TAG(jfr, system, bytecode) \
  JFR_LOG_TAG(jfr, system, parser) \
  JFR_LOG_TAG(jfr, system, metadata) \
  JFR_LOG_TAG(jfr, metadata) \
  JFR_LOG_TAG(jfr, event) \
  JFR_LOG_TAG(jfr, setting) \
  JFR_LOG_TAG(jfr, dcmd)
  /* NEW TAGS, DONT FORGET TO UPDATE JAVA SIDE */</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, note that the tags seen above are not all used in the VM native code, instead
JFR is unique in its genre as it is using unified logging in its Java code base.
For that the above C++ enum is bound as Java enum
<a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/e68804acbb0c9c66931a7c494a6722efc0eefb1c#diff-0e924ad42210746c2311151b92a2d61c">src/jdk.jfr/share/classes/jdk/jfr/internal/LogTag.java</a>,
and can call the native log method via this
<a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u/commit/e68804acbb0c9c66931a7c494a6722efc0eefb1c#diff-db120cf46c6f014e0335e9c421b31911">src/jdk.jfr/share/classes/jdk/jfr/internal/JVM.java</a>
class.</p>
</div>
</div>
</details>
<details>
<summary class="title">GC tag sets, declared to print the message prefix</summary>
<div class="content">
<div class="listingblock">
<div class="title"><a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/logging/logPrefix.hpp#L45-L90">src/hotspot/share/logging/logPrefix.hpp#L45-L90</a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">#define LOG_PREFIX_LIST \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, age)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, alloc)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, alloc, region)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, barrier)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, classhisto)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, compaction)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, cpu)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ergo)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ergo, cset)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ergo, heap)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ergo, ihop)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ergo, refine)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, heap)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, heap, region)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, freelist)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, humongous)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ihop)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, liveness)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, load)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, marking)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, metaspace)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, mmu)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, nmethod)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, phases)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, phases, ref)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, phases, start)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, phases, task)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, plab)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, region)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, remset)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, remset, tracking)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ref)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, ref, start)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, reloc)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, start)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, stringtable)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, sweep)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, task)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, task, start)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, task, stats)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, task, time)) \
  DEBUG_ONLY(LOG_PREFIX(Test_log_prefix_prefixer, LOG_TAGS(logging, test))) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, tlab)) \
  LOG_PREFIX(GCId::print_prefix, LOG_TAGS(gc, workgang))</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Classes, Classloading, JVMTI, compiler, etc.</summary>
<div class="content">
<div class="paragraph">
<p>The other <em>tag-sets</em> are not declared, so I’m listing some of them in a non exhaustive way for the other major
JVM component.</p>
</div>
<div class="ulist">
<div class="title">AOT <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/aot/aotCodeHeap.cpp">src/hotspot/share/aot/aotCodeHeap.cpp</a></div>
<ul>
<li>
<p><code>log_debug(aot, class, resolve)</code></p>
</li>
<li>
<p><code>log_info(aot, class, resolve)</code></p>
</li>
<li>
<p><code>log_trace(aot, class, fingerprint)</code></p>
</li>
<li>
<p><code>log_trace(aot, class, load)</code></p>
</li>
</ul>
</div>
<div class="dlist">
<div class="title">Classes</div>
<dl>
<dt class="hdlist1">Class file loading, linking</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_error(class)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/classfile/javaClasses.cpp">src/hotspot/share/classfile/javaClasses.cpp</a></p>
</li>
<li>
<p><code>log_info(class, fingerprint)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/classfile/classFileParser.cpp">src/hotspot/share/classfile/classFileParser.cpp</a></p>
</li>
<li>
<p><code>log_info(class, preview)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/classfile/classFileParser.cpp">src/hotspot/share/classfile/classFileParser.cpp</a></p>
</li>
<li>
<p><code>log_debug(class, resolve)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/classfile/classFileParser.cpp">src/hotspot/share/classfile/classFileParser.cpp</a></p>
</li>
<li>
<p><code>LogMessage(class, load)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/oops/instanceKlass.cpp">src/hotspot/share/oops/instanceKlass.cpp</a></p>
</li>
<li>
<p><code>log_trace(class, nestmates)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/oops/instanceKlass.cpp">src/hotspot/share/oops/instanceKlass.cpp</a></p>
</li>
<li>
<p><code>LogTarget(Info, class, init)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/oops/instanceKlass.cpp">src/hotspot/share/oops/instanceKlass.cpp</a></p>
</li>
<li>
<p><code>log_trace(class, fingerprint)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/oops/instanceKlass.cpp">src/hotspot/share/oops/instanceKlass.cpp</a></p>
</li>
<li>
<p><code>LogTarget(Debug, class, loader, data)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/classfile/classLoaderData.cpp">src/hotspot/share/classfile/classLoaderData.cpp</a></p>
</li>
<li>
<p><code>LogTarget(Trace, class, loader, data)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/classfile/classLoaderData.cpp">src/hotspot/share/classfile/classLoaderData.cpp</a></p>
</li>
<li>
<p><code>log_debug(class, loader, data)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/classfile/classLoaderData.cpp">src/hotspot/share/classfile/classLoaderData.cpp</a></p>
</li>
<li>
<p><code>log_info(class, load)</code> <a href="https://github.com/corretto/corretto-11/blob/0fb85ec862711e6daa4db7d7fab819c0e7a1273d/src/src/hotspot/share/classfile/classLoader.cpp">src/hotspot/share/classfile/classLoader.cpp</a></p>
</li>
<li>
<p><code>log_info(class, path)</code> <a href="https://github.com/corretto/corretto-11/blob/0fb85ec862711e6daa4db7d7fab819c0e7a1273d/src/src/hotspot/share/classfile/classLoader.cpp">src/hotspot/share/classfile/classLoader.cpp</a></p>
</li>
<li>
<p><code>LogTarget(Info, class, loader, constraints)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/classfile/loaderConstraints.cpp">src/hotspot/share/classfile/loaderConstraints.cpp</a></p>
</li>
<li>
<p><code>log_debug(class, init)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/classfile/verifier.cpp">src/hotspot/share/classfile/verifier.cpp</a></p>
</li>
<li>
<p><code>log_debug(class, resolve)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/classfile/verifier.cpp">src/hotspot/share/classfile/verifier.cpp</a></p>
</li>
<li>
<p><code>log_info(verification)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/classfile/verifier.cpp">src/hotspot/share/classfile/verifier.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Class loading service</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_info(class, unload)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/services/classLoadingService.cpp">src/hotspot/share/services/classLoadingService.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Constant Pool</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_debug(class, resolve)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/oops/constantPool.cpp">src/hotspot/share/oops/constantPool.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Native methods (compiled code versions of Java methods)</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>LogTarget(Trace, class, unload, nmethod)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/code/nmethod.cpp">src/hotspot/share/code/nmethod.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Memory</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_info(class, path)</code> <a href="https://github.com/corretto/corretto-11/blob/6887ddf929a1baae5b4f73a3b6c255c4ee942f7c/src/src/hotspot/share/memory/filemap.cpp">src/hotspot/share/memory/filemap.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">OOPS</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_trace(class, unload)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/oops/klass.cpp">src/hotspot/share/oops/klass.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">JNI</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_is_enabled(Debug, class, resolve)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/prims/jni.cpp">src/hotspot/share/prims/jni.cpp</a></p>
</li>
<li>
<p><code>log_debug(class, resolve)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvm.cpp">src/hotspot/share/prims/jvm.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Reflection</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_debug(class, resolve)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/runtime/reflection.cpp">src/hotspot/share/runtime/reflection.cpp</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Class Data Sharing</div>
<ul>
<li>
<p><code>log_info(cds)</code> <a href="https://github.com/corretto/corretto-11/blob/6887ddf929a1baae5b4f73a3b6c255c4ee942f7c/src/src/hotspot/share/memory/filemap.cpp">src/hotspot/share/memory/filemap.cpp</a></p>
</li>
<li>
<p><code>log_trace(cds)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/oops/klass.cpp">src/hotspot/share/oops/klass.cpp</a></p>
</li>
<li>
<p><code>log_trace(cds, unshareable)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/oops/klass.cpp">src/hotspot/share/oops/klass.cpp</a></p>
</li>
<li>
<p><code>log_debug(cds, mirror)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/oops/klass.cpp">src/hotspot/share/oops/klass.cpp</a></p>
</li>
<li>
<p><code>log_trace(cds)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/oops/constantPool.cpp">src/hotspot/share/oops/constantPool.cpp</a></p>
</li>
</ul>
</div>
<div class="dlist">
<div class="title">Redefinition</div>
<dl>
<dt class="hdlist1">Method comparator (equivalent modulo constant pool or EMCP)</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_debug(redefine, class, methodcomparator)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/prims/methodComparator.cpp">src/hotspot/share/prims/methodComparator.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Native methods (compiled code versions of Java methods)</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_debug(redefine, class, nmethod)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/code/nmethod.cpp">src/hotspot/share/code/nmethod.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">CPU specific</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_is_enabled(Trace, redefine, class, obsolete)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/cpu/x86/sharedRuntime_x86_64.cpp">src/hotspot/cpu/x86/sharedRuntime_x86_64.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Constant pool</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_info(redefine, class, update)</code> <a href="https://github.com/corretto/corretto-11/blob/2750418af3603bcb10ba5e933a7198f21b78361d/src/src/hotspot/share/oops/cpCache.cpp">src/hotspot/share/oops/cpCache.cpp</a></p>
</li>
<li>
<p><code>redefine, class, update, constantpool</code> <a href="https://github.com/corretto/corretto-11/blob/2750418af3603bcb10ba5e933a7198f21b78361d/src/src/hotspot/share/oops/cpCache.cpp">src/hotspot/share/oops/cpCache.cpp</a>
<a href="https://github.com/corretto/corretto-11/blob/0fb85ec862711e6daa4db7d7fab819c0e7a1273d/src/src/hotspot/share/prims/resolvedMethodTable.cpp">src/hotspot/share/prims/resolvedMethodTable.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Class, vtables, itables</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_trace(redefine, class, iklass, purge)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/oops/instanceKlass.cpp">src/hotspot/share/oops/instanceKlass.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, iklass, add)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/oops/instanceKlass.cpp">src/hotspot/share/oops/instanceKlass.cpp</a></p>
</li>
<li>
<p><code>log_debug(redefine, class, update, vtables)</code> <a href="https://github.com/corretto/corretto-11/blob/4282d34d30b3e657ce8247c99806490b70426f6d/src/src/hotspot/share/oops/klassVtable.cpp">src/hotspot/share/oops/klassVtable.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, update, itables)</code> <a href="https://github.com/corretto/corretto-11/blob/4282d34d30b3e657ce8247c99806490b70426f6d/src/src/hotspot/share/oops/klassVtable.cpp">src/hotspot/share/oops/klassVtable.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Interpreter</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_debug(redefine, class, interpreter, oopmap)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/interpreter/oopMapCache.cpp">src/hotspot/share/interpreter/oopMapCache.cpp</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">JVMTI</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>log_debug(redefine, class, breakpoint)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/prims/jvmtiImpl.cpp">src/hotspot/share/prims/jvmtiImpl.cpp</a></p>
</li>
<li>
<p><code>log_info(redefine, class, timer)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, constantpool)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, nestmates)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, normalize)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, load, exceptions)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, annotation)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, stackmap)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, obsolete, mark)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, obsolete, metadata)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
<li>
<p><code>log_trace(redefine, class, dump)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiRedefineClasses.cpp">src/hotspot/share/prims/jvmtiRedefineClasses.cpp</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Java Virtual Machine Tool Interface (JVMTI, JSR-163)</div>
<ul>
<li>
<p><code>TRACETIME_LOG(Debug, jvmti, objecttagging)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/prims/jvmtiEnv.cpp">src/hotspot/share/prims/jvmtiEnv.cpp</a>
<a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/prims/jvmtiTagMap.cpp">src/hotspot/share/prims/jvmtiTagMap.cpp</a></p>
</li>
<li>
<p><code>LogTarget(Trace, jvmti) log</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/prims/jvmtiExport.cpp#L428" class="bare">https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/prims/jvmtiExport.cpp#L428</a></p>
</li>
<li>
<p><code>log_trace(jvmti)(&#34;----- capabilities -----&#34;)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/prims/jvmtiManageCapabilities.cpp">src/hotspot/share/prims/jvmtiManageCapabilities.cpp</a></p>
</li>
<li>
<p><code>log_trace(jvmti)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/prims/jvmtiTrace.cpp">src/hotspot/share/prims/jvmtiTrace.cpp</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Compilation, Just-in-Time, Interpreter</div>
<ul>
<li>
<p><code>Log(compilation, codecache) log; if(log.is_debug())</code>  <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/compiler/compileBroker.cpp">src/hotspot/share/compiler/compileBroker.cpp</a></p>
</li>
<li>
<p><code>LogTarget(Debug, jit, compilation)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/compiler/compileTask.cpp">src/hotspot/share/compiler/compileTask.cpp</a></p>
</li>
<li>
<p><code>log_debug(jit, inlining)</code> <a href="https://github.com/corretto/corretto-11/blob/2b351313740f148597cf680d8443df93931de813/src/src/hotspot/share/compiler/compileTask.cpp">src/hotspot/share/compiler/compileTask.cpp</a>
<a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/opto/library_call.cpp">src/hotspot/share/opto/library_call.cpp</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Interpreter
* <code>log_debug(interpreter, oopmap)</code> <a href="https://github.com/corretto/corretto-11/blob/8bb50b6fcf0613dc85010c45f96fa048ecd5dba4/src/src/hotspot/share/interpreter/oopMapCache.cpp">src/hotspot/share/interpreter/oopMapCache.cpp</a>
* <code>log_debug(interpreter, safepoint)</code> <a href="https://github.com/corretto/corretto-11/blob/caa2f4cad666b508a88b92db01054ace8647a820/src/src/hotspot/share/interpreter/templateInterpreter.cpp">src/hotspot/share/interpreter/templateInterpreter.cpp</a></p>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_other_tags_combinations_examples"><a class="anchor" href="#_other_tags_combinations_examples"></a><a class="link" href="#_other_tags_combinations_examples">Other tags combinations examples</a></h3>
<div class="sect3">
<h4 id="_os_and_container_related"><a class="anchor" href="#_os_and_container_related"></a><a class="link" href="#_os_and_container_related">OS and container related</a></h4>
<div class="paragraph">
<p>If the workload you are working on is running on containers you may have heard of the
<code>os</code> and <code>container</code> tags:</p>
</div>
<div class="listingblock">
<div class="title">os, container, pagesize logs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ head -n 200 /var/log/2020-05-22_22-28-32-os-container-pagezise.log
[0.003s][trace][os,container] OSContainer::init: Initializing Container Support
[0.003s][trace][os,container] Path to /memory.use_hierarchy is /sys/fs/cgroup/memory/memory.use_hierarchy
[0.003s][trace][os,container] Use Hierarchy is: 1
[0.003s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes
[0.003s][trace][os,container] Memory Limit is: 5368709120
[0.003s][info ][os,container] Memory Limit is: 5368709120
[0.003s][trace][os,container] Path to /cpu.cfs_quota_us is /sys/fs/cgroup/cpu/cpu.cfs_quota_us
[0.003s][trace][os,container] CPU Quota is: -1
[0.003s][trace][os,container] Path to /cpu.cfs_period_us is /sys/fs/cgroup/cpu/cpu.cfs_period_us
[0.003s][trace][os,container] CPU Period is: 100000
[0.003s][trace][os,container] Path to /cpu.shares is /sys/fs/cgroup/cpu/cpu.shares
[0.004s][trace][os,container] CPU Shares is: 1024
[0.004s][trace][os,container] OSContainer::active_processor_count: 4
[0.004s][trace][os,container] Path to /cpu.cfs_quota_us is /sys/fs/cgroup/cpu/cpu.cfs_quota_us
[0.004s][trace][os,container] CPU Quota is: -1
[0.004s][trace][os,container] Path to /cpu.cfs_period_us is /sys/fs/cgroup/cpu/cpu.cfs_period_us
[0.004s][trace][os,container] CPU Period is: 100000
[0.004s][trace][os,container] Path to /cpu.shares is /sys/fs/cgroup/cpu/cpu.shares
[0.004s][trace][os,container] CPU Shares is: 1024
[0.004s][trace][os,container] OSContainer::active_processor_count: 4
[0.004s][info ][os          ] Use of CLOCK_MONOTONIC is supported
[0.004s][info ][os          ] Use of pthread_condattr_setclock is supported
[0.004s][info ][os          ] Relative timed-wait using pthread_cond_timedwait is associated with CLOCK_MONOTONIC
[0.004s][info ][os          ] HotSpot is running with glibc 2.28, NPTL 2.28
[0.005s][info ][os          ] SafePoint Polling address, bad (protected) page:0x00007fa25e8ee000, good (unprotected) page:0x00007fa25e8ef000
[0.005s][info ][os          ] attempting shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libinstrument.so
[0.005s][info ][os          ] shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libinstrument.so was successful
[0.005s][info ][os          ] attempting shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libinstrument.so
[0.005s][info ][os          ] shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libinstrument.so was successful
[0.006s][info ][os          ] attempting shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libinstrument.so
[0.006s][info ][os          ] shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libinstrument.so was successful
[0.008s][info ][os,thread   ] Thread attached (tid: 8, pthread id: 140335320479488).
[0.008s][info ][os          ] attempting shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libzip.so
[0.008s][info ][os          ] shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libzip.so was successful
[0.008s][info ][os          ] attempting shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libjimage.so
[0.008s][info ][os          ] shared library load of /usr/lib/jvm/java-11-amazon-corretto/lib/libjimage.so was successful
[0.008s][trace][os,container] Path to /cpu.cfs_quota_us is /sys/fs/cgroup/cpu/cpu.cfs_quota_us
[0.008s][trace][os,container] CPU Quota is: -1
[0.008s][trace][os,container] Path to /cpu.cfs_period_us is /sys/fs/cgroup/cpu/cpu.cfs_period_us
[0.008s][trace][os,container] CPU Period is: 100000
[0.008s][trace][os,container] Path to /cpu.shares is /sys/fs/cgroup/cpu/cpu.shares
[0.008s][trace][os,container] CPU Shares is: 1024
[0.009s][trace][os,container] OSContainer::active_processor_count: 4
[0.009s][info ][pagesize    ] CodeHeap &#39;non-nmethods&#39;:  min=2496K max=5696K base=0x00007fa24090d000 page_size=4K size=5696K
[0.009s][info ][pagesize    ] CodeHeap &#39;profiled nmethods&#39;:  min=2496K max=120032K base=0x00007fa240e9d000 page_size=4K size=120032K
[0.009s][info ][pagesize    ] CodeHeap &#39;non-profiled nmethods&#39;:  min=2496K max=120032K base=0x00007fa2483d5000 page_size=4K size=120032K
[0.010s][info ][os,cpu      ] CPU:total 4 (initial active 4) (1 cores per cpu, 1 threads per core) family 6 model 142 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, avx, avx2, aes, clmul, erms, 3dnowpref, lzcnt, tsc, tscinvbit, bmi1, bmi2, fma
[0.010s][info ][os,cpu      ] CPU Model and flags from /proc/cpuinfo:
[0.010s][info ][os,cpu      ] model name  : Intel(R) Core(TM) i7-8559U CPU @ 2.70GHz
[0.010s][info ][os,cpu      ] flags               : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht pbe syscall nx pdpe1gb lm constant_tsc rep_good nopl xtopology nonstop_tsc cpuid tsc_known_freq pni pclmulqdq dtes64 ds_cpl ssse3 sdbg fma cx16 xtpr pcid sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch pti fsgsbase bmi1 avx2 bmi2 erms xsaveopt arat
[0.010s][info ][os,thread   ] Thread started (pthread id: 140335306258176, attributes: stacksize: 1024k, guardsize: 4k, detached).
[0.010s][info ][os,thread   ] Thread is alive (tid: 9, pthread id: 140335306258176).
[0.011s][info ][pagesize    ] Heap:  min=8M max=768M base=0x00000000d0000000 page_size=4K size=768M
[0.011s][info ][pagesize    ] Block Offset Table: req_size=1536K base=0x00007fa240389000 page_size=4K alignment=4K size=1536K
[0.011s][info ][pagesize    ] Card Table: req_size=1536K base=0x00007fa240209000 page_size=4K alignment=4K size=1536K
[0.011s][info ][pagesize    ] Card Counts Table: req_size=1536K base=0x00007fa240089000 page_size=4K alignment=4K size=1536K
[0.011s][info ][pagesize    ] Prev Bitmap: req_size=12M base=0x00007fa23b400000 page_size=4K alignment=4K size=12M
[0.011s][info ][pagesize    ] Next Bitmap: req_size=12M base=0x00007fa23a800000 page_size=4K alignment=4K size=12M
[0.011s][info ][os,thread   ] Thread started (pthread id: 140334742894336, attributes: stacksize: 1024k, guardsize: 4k, detached).
[0.011s][info ][os,thread   ] Thread is alive (tid: 10, pthread id: 140334742894336).
[0.011s][info ][os,thread   ] Thread started (pthread id: 140334741837568, attributes: stacksize: 1024k, guardsize: 4k, detached).
[0.011s][info ][os,thread   ] Thread is alive (tid: 11, pthread id: 140334741837568).
[0.012s][info ][os,thread   ] Thread started (pthread id: 140334703015680, attributes: stacksize: 1024k, guardsize: 4k, detached).
[0.012s][info ][os,thread   ] Thread is alive (tid: 12, pthread id: 140334703015680).
[0.012s][info ][os,thread   ] Thread started (pthread id: 140334499624704, attributes: stacksize: 1024k, guardsize: 4k, detached).
[0.012s][info ][os,thread   ] Thread is alive (tid: 13, pthread id: 140334499624704).
[0.021s][info ][os,thread   ] Thread started (pthread id: 140334490179328, attributes: stacksize: 1024k, guardsize: 4k, detached).
[0.021s][info ][os,thread   ] Thread is alive (tid: 14, pthread id: 140334490179328).
[0.024s][trace][os,container] Path to /cpu.cfs_quota_us is /sys/fs/cgroup/cpu/cpu.cfs_quota_us
[0.024s][trace][os,container] CPU Quota is: -1
[0.024s][trace][os,container] Path to /cpu.cfs_period_us is /sys/fs/cgroup/cpu/cpu.cfs_period_us
[0.024s][trace][os,container] CPU Period is: 100000
[0.024s][trace][os,container] Path to /cpu.shares is /sys/fs/cgroup/cpu/cpu.shares
[0.024s][trace][os,container] CPU Shares is: 1024
[0.024s][trace][os,container] OSContainer::active_processor_count: 4
[0.025s][info ][os,thread   ] Thread started (pthread id: 140334489122560, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.025s][info ][os,thread   ] Thread is alive (tid: 15, pthread id: 140334489122560).
[0.025s][info ][os,thread   ] Thread started (pthread id: 140334488069888, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.025s][info ][os,thread   ] Thread is alive (tid: 16, pthread id: 140334488069888).
[0.033s][info ][os,thread   ] Thread started (pthread id: 140334485497600, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.033s][info ][os,thread   ] Thread is alive (tid: 17, pthread id: 140334485497600).
[0.033s][info ][os,thread   ] Thread started (pthread id: 140334484444928, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.033s][info ][os,thread   ] Thread is alive (tid: 18, pthread id: 140334484444928).
[0.033s][info ][os,thread   ] Thread started (pthread id: 140334483392256, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.034s][info ][os,thread   ] Thread is alive (tid: 19, pthread id: 140334483392256).
[0.034s][info ][os,thread   ] Thread started (pthread id: 140334482339584, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.035s][info ][os,thread   ] Thread is alive (tid: 20, pthread id: 140334482339584).
[0.036s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes
[0.036s][trace][os,container] Memory Limit is: 5368709120
[0.036s][trace][os,container] Path to /memory.usage_in_bytes is /sys/fs/cgroup/memory/memory.usage_in_bytes
[0.036s][trace][os,container] Memory Usage is: 9551872
[0.037s][trace][os,container] Path to /memory.usage_in_bytes is /sys/fs/cgroup/memory/memory.usage_in_bytes
[0.037s][trace][os,container] Memory Usage is: 9682944
...
[0.058s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes
[0.058s][trace][os,container] Memory Limit is: 5368709120
[0.058s][trace][os,container] Path to /memory.usage_in_bytes is /sys/fs/cgroup/memory/memory.usage_in_bytes
[0.058s][trace][os,container] Memory Usage is: 12820480
...
[0.064s][info ][os,thread   ] Thread started (pthread id: 140334481286912, attributes: stacksize: 1024k, guardsize: 0k, detached).
[0.064s][info ][os,thread   ] Thread is alive (tid: 21, pthread id: 140334481286912).
...
[8005.132s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes
[8005.132s][trace][os,container] Memory Limit is: 5368709120
[8005.132s][trace][os,container] Path to /memory.usage_in_bytes is /sys/fs/cgroup/memory/memory.usage_in_bytes
[8005.132s][trace][os,container] Memory Usage is: 4093734912
[8014.238s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes
[8014.238s][trace][os,container] Memory Limit is: 5368709120
[8014.238s][trace][os,container] Path to /memory.usage_in_bytes is /sys/fs/cgroup/memory/memory.usage_in_bytes
[8014.238s][trace][os,container] Memory Usage is: 4093943808
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_class_redefinition"><a class="anchor" href="#_class_redefinition"></a><a class="link" href="#_class_redefinition">Class redefinition</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AgentTest {

    public static void main(String[] args) {
        Foo foo = new Foo();
        System.out.printf(&#34;[%.3fs][stdout] m(): %s%n&#34;,
                          ManagementFactory.getRuntimeMXBean().getUptime() / 1000d,
                          foo.m());

        ByteBuddyAgent.install();
        new ByteBuddy()
                .redefine(Bar.class)
                .name(Foo.class.getName())
                .make()
                .load(Foo.class.getClassLoader(), ClassReloadingStrategy.fromInstalledAgent());

        System.out.printf(&#34;[%.3fs][stdout] m(): %s%n&#34;,
                          ManagementFactory.getRuntimeMXBean().getUptime() / 1000d,
                          foo.m());
    }

    private static class Foo {
        String m() { return &#34;foo&#34;; }
    }
    private static class Bar {
        String m() { return &#34;bar&#34;; }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Logs when running the code snippet</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ java -Xlog:redefine+class*=debug -cp .:./lib/byte-buddy-agent-1.10.13.jar:./lib/byte-buddy-1.10.13.jar AgentTest
[0.151s][stdout] m(): foo
[0.688s][debug][redefine,class,load] loading name=AgentTest$Foo kind=101 (avail_mem=108304K)
[0.688s][info ][redefine,class,constantpool] old_cp_len=25, scratch_cp_len=29
[0.688s][debug][redefine,class,constantpool] after pass 0: merge_cp_len=25
[0.688s][debug][redefine,class,constantpool] after pass 1a: merge_cp_len=31, scratch_i=25, index_map_len=6
[0.688s][debug][redefine,class,constantpool] after pass 1b: merge_cp_len=31, scratch_i=29, index_map_len=10
[0.688s][info ][redefine,class,constantpool] merge_cp_len=31, index_map_len=10
[0.688s][debug][redefine,class,load        ] loaded name=AgentTest$Foo (avail_mem=108304K)
[0.690s][info ][redefine,class,update      ] adjust: name=AgentTest$Foo
[0.690s][debug][redefine,class,update,constantpool] cpc special, static or dynamic entry update: &lt;init&gt;(()V)
[0.690s][info ][redefine,class,load               ] redefined name=AgentTest$Foo, count=1 (avail_mem=108304K)
[0.690s][info ][redefine,class,timer              ] vm_op: all=0  prologue=0  doit=0
[0.690s][info ][redefine,class,timer              ] redefine_single_class: phase1=0  phase2=0
[0.690s][stdout] m(): bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>These logs are quite technical, but they may be useful when developing agents.</p>
</div>
</div>
<div class="sect3">
<h4 id="_during_debug"><a class="anchor" href="#_during_debug"></a><a class="link" href="#_during_debug">During debug</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.management.ManagementFactory;

public class DebugTest {

    public static void main(String[] args) {
        var foo = new Foo();
        System.out.printf(&#34;[%.3fs][stdout] m(): %s%n&#34;,  <i class="conum" data-value="1"></i><b>(1)</b>
                          ManagementFactory.getRuntimeMXBean().getUptime() / 1000d,
                          foo.m());
        System.out.printf(&#34;[%.3fs][stdout] m(): %s%n&#34;,  // in debug advance by one step
                          ManagementFactory.getRuntimeMXBean().getUptime() / 1000d,
                          foo.m());
    }

    private static class Foo {
        @Alpha(v = &#34;bim&#34;)
        String m() { return &#34;foo&#34;; }
    }

    @Retention(RetentionPolicy.RUNTIME)
    @interface Alpha { String v(); }

    @Retention(RetentionPolicy.RUNTIME)
    @interface Beta { String val(); }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set break point here, then change the inner class <code>Foo</code>, like the annotation value,
adds another instruction, change the return values of <code>m()</code>, etc.</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="title">Change <code>Foo.m()</code> class after instantiation during debug</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ java -Xlog:redefine*=trace,jvmti*=trace -agentlib:jdwp=transport=dt_socket,server=n,suspend=y,address=61222 -cp . DebugTest
[51.942s][debug][redefine,class,load] loading name=sandbox.DebugTest kind=102 (avail_mem=1416012K)         <i class="conum" data-value="1"></i><b>(1)</b>
[51.942s][trace][redefine,class,normalize] Method matched: new: sandbox.DebugTest.&lt;init&gt;()V [0] == old: sandbox.DebugTest.&lt;init&gt;()V [0]
[51.942s][trace][redefine,class,normalize] Method matched: new: sandbox.DebugTest.main([Ljava/lang/String;)V [1] == old: sandbox.DebugTest.main([Ljava/lang/String;)V [1]
[51.942s][info ][redefine,class,constantpool] old_cp_len=91, scratch_cp_len=91
[51.942s][debug][redefine,class,constantpool] after pass 0: merge_cp_len=91
[51.942s][debug][redefine,class,constantpool] after pass 1a: merge_cp_len=91, scratch_i=91, index_map_len=0
[51.942s][info ][redefine,class,constantpool] merge_cp_len=91, index_map_len=0
[51.942s][debug][redefine,class,load        ] loaded name=sandbox.DebugTest (avail_mem=1416012K)
[51.942s][debug][redefine,class,load        ] loading name=sandbox.DebugTest$Foo kind=102 (avail_mem=1416012K)
[51.942s][trace][redefine,class,normalize   ] Method matched: new: sandbox.DebugTest$Foo.&lt;init&gt;()V [0] == old: sandbox.DebugTest$Foo.&lt;init&gt;()V [0]
[51.942s][trace][redefine,class,normalize   ] Method matched: new: sandbox.DebugTest$Foo.m()Ljava/lang/String; [1] == old: sandbox.DebugTest$Foo.m()Ljava/lang/String; [1]
[51.942s][info ][redefine,class,constantpool] old_cp_len=40, scratch_cp_len=48                             <i class="conum" data-value="2"></i><b>(2)</b>
[51.942s][debug][redefine,class,constantpool] after pass 0: merge_cp_len=40
[51.942s][trace][redefine,class,constantpool] mapped tag 8 at index 7 to 40
[51.942s][trace][redefine,class,constantpool] mapped tag 1 at index 8 to 41
[51.942s][trace][redefine,class,constantpool] mapped tag 1 at index 12 to 42
[51.942s][trace][redefine,class,constantpool] Class entry@43 name_index change: 12 to 42
[51.942s][trace][redefine,class,constantpool] mapped tag 100 at index 10 to 43
[51.942s][trace][redefine,class,constantpool] mapped tag 1 at index 13 to 44
[51.942s][trace][redefine,class,constantpool] mapped tag 1 at index 14 to 45
[51.942s][trace][redefine,class,constantpool] NameAndType entry@46 name_ref_index change: 13 to 44
[51.942s][trace][redefine,class,constantpool] NameAndType entry@46 signature_ref_index change: 14 to 45
[51.942s][trace][redefine,class,constantpool] mapped tag 12 at index 11 to 46
[51.942s][trace][redefine,class,constantpool] Methodref entry@47 class_index changed: 10 to 43
[51.942s][trace][redefine,class,constantpool] Methodref entry@47 name_and_type_index changed: 11 to 46
[51.942s][trace][redefine,class,constantpool] mapped tag 10 at index 9 to 47
...
[51.942s][trace][redefine,class,constantpool] mapped tag 1 at index 39 to 31
[51.942s][debug][redefine,class,constantpool] after pass 1a: merge_cp_len=50, scratch_i=40, index_map_len=33
[51.943s][trace][redefine,class,constantpool] mapped tag 1 at index 40 to 32
...
[51.943s][trace][redefine,class,constantpool] mapped tag 1 at index 46 to 50
[51.943s][trace][redefine,class,constantpool] Class entry@51 name_index change: 46 to 50
[51.943s][trace][redefine,class,constantpool] mapped tag 100 at index 45 to 51
[51.943s][trace][redefine,class,constantpool] mapped tag 1 at index 47 to 52
[51.943s][debug][redefine,class,constantpool] after pass 1b: merge_cp_len=53, scratch_i=48, index_map_len=41
[51.943s][info ][redefine,class,constantpool] merge_cp_len=53, index_map_len=41
[51.943s][trace][redefine,class,constantpool] index_map[0]: old=7 new=40
[51.943s][trace][redefine,class,constantpool] index_map[1]: old=8 new=41
...
[51.943s][trace][redefine,class,constantpool] index_map[40]: old=47 new=52
[51.943s][trace][redefine,class,constantpool] ldc@0x0000000110ee1348 old=7, new=40
[51.943s][trace][redefine,class,constantpool] invokestatic@0x0000000110ee134a old=9, new=47
[51.943s][trace][redefine,class,constantpool] new@0x0000000110ee134e old=15, new=7
[51.943s][trace][redefine,class,constantpool] ldc@0x0000000110ee1352 old=17, new=9
[51.943s][trace][redefine,class,constantpool] invokespecial@0x0000000110ee1354 old=19, new=11
[51.943s][trace][redefine,class,constantpool] invokevirtual@0x0000000110ee1357 old=22, new=14
[51.943s][debug][redefine,class,annotation  ] num_annotations=1                                            <i class="conum" data-value="3"></i><b>(3)</b>
[51.943s][debug][redefine,class,annotation  ] mapped old type_index=35
[51.943s][debug][redefine,class,annotation  ] type_index=48  num_element_value_pairs=1
[51.943s][debug][redefine,class,annotation  ] mapped old element_name_index=36
[51.943s][debug][redefine,class,annotation  ] element_name_index=49
[51.943s][debug][redefine,class,annotation  ] tag=&#39;s&#39;
[51.943s][debug][redefine,class,annotation  ] mapped old const_value_index=37
[51.943s][debug][redefine,class,annotation  ] const_value_index=29
[51.943s][trace][redefine,class,constantpool] inner_class_info change: 26 to 18
[51.943s][trace][redefine,class,constantpool] outer_class_info change: 41 to 33
[51.943s][trace][redefine,class,constantpool] inner_name change: 44 to 36
[51.943s][trace][redefine,class,constantpool] inner_class_info change: 45 to 51
[51.943s][trace][redefine,class,constantpool] outer_class_info change: 41 to 33
[51.943s][trace][redefine,class,constantpool] inner_name change: 47 to 52
[51.943s][trace][redefine,class,constantpool] method-name_index change: 33 to 25
[51.943s][trace][redefine,class,constantpool] method-signature_index change: 25 to 17
[51.943s][trace][redefine,class,constantpool] lvt-name_cp_index change: 31 to 23
[51.943s][trace][redefine,class,constantpool] lvt-descriptor_cp_index change: 32 to 24
[51.943s][trace][redefine,class,constantpool] lvt-name_cp_index change: 31 to 23
[51.943s][trace][redefine,class,constantpool] lvt-descriptor_cp_index change: 32 to 24
[51.943s][debug][redefine,class,load        ] loaded name=sandbox.DebugTest$Foo (avail_mem=1416012K)       <i class="conum" data-value="4"></i><b>(4)</b>
[51.943s][trace][redefine,class,obsolete,mark] EMCP_cnt=2, obsolete_cnt=0                                  <i class="conum" data-value="5"></i><b>(5)</b>
[51.943s][trace][redefine,class,iklass,add   ] adding previous version ref for sandbox.DebugTest, EMCP_cnt=2
[51.943s][trace][redefine,class,iklass,add   ] EMCP method sandbox.DebugTest.&lt;init&gt;()V is NOT on_stack 0x0000000110edf4a8
[51.943s][trace][redefine,class,iklass,add   ] EMCP method sandbox.DebugTest.main([Ljava/lang/String;)V is on_stack 0x0000000110edf5c0
[51.943s][trace][redefine,class,iklass,add   ] scratch class added; one of its methods is on_stack.
[51.943s][info ][redefine,class,load         ] redefined name=sandbox.DebugTest, count=1 (avail_mem=1416012K)
[51.943s][trace][redefine,class,obsolete,mark] mark m(()Ljava/lang/String;) as obsolete
[51.943s][trace][redefine,class,obsolete,mark] EMCP_cnt=1, obsolete_cnt=1                                  <i class="conum" data-value="6"></i><b>(6)</b>
[51.943s][trace][redefine,class,iklass,add   ] adding previous version ref for sandbox.DebugTest$Foo, EMCP_cnt=1
[51.943s][trace][redefine,class,iklass,add   ] scratch class not added; no methods are running
[51.943s][info ][redefine,class,update       ] adjust: name=sandbox.DebugTest$Foo
[51.943s][debug][redefine,class,update,constantpool] cpc special, static or dynamic entry update: &lt;init&gt;(()V)
[51.943s][info ][redefine,class,load               ] redefined name=sandbox.DebugTest$Foo, count=1 (avail_mem=1416012K)
[51.944s][trace][redefine,class,obsolete,metadata  ] calling check_class
[51.944s][info ][redefine,class,timer              ] vm_op: all=0  prologue=0  doit=0
[51.944s][info ][redefine,class,timer              ] redefine_single_class: phase1=0  phase2=0
[51.964s][debug][redefine,class,breakpoint         ] setting breakpoint in main(([Ljava/lang/String;)V)    <i class="conum" data-value="7"></i><b>(7)</b>
[57.587s][debug][redefine,class,breakpoint         ] clearing breakpoint in main(([Ljava/lang/String;)V)   <i class="conum" data-value="8"></i><b>(8)</b>
[57.588s][debug][redefine,class,breakpoint         ] setting breakpoint in main(([Ljava/lang/String;)V)
[57.682s][stdout] m(): foo
[72.578s][debug][redefine,class,breakpoint         ] clearing breakpoint in main(([Ljava/lang/String;)V)   <i class="conum" data-value="9"></i><b>(9)</b>
[72.586s][debug][redefine,class,load               ] loading name=sandbox.DebugTest kind=102 (avail_mem=1234396K)
[72.586s][trace][redefine,class,normalize          ] Method matched: new: sandbox.DebugTest.&lt;init&gt;()V [0] == old: sandbox.DebugTest.&lt;init&gt;()V [0]
[72.586s][trace][redefine,class,normalize          ] Method matched: new: sandbox.DebugTest.main([Ljava/lang/String;)V [1] == old: sandbox.DebugTest.main([Ljava/lang/String;)V [1]
[72.586s][info ][redefine,class,constantpool       ] old_cp_len=91, scratch_cp_len=91
[72.586s][debug][redefine,class,constantpool       ] after pass 0: merge_cp_len=91
[72.586s][debug][redefine,class,constantpool       ] after pass 1a: merge_cp_len=91, scratch_i=91, index_map_len=0
[72.586s][info ][redefine,class,constantpool       ] merge_cp_len=91, index_map_len=0
[72.586s][debug][redefine,class,load               ] loaded name=sandbox.DebugTest (avail_mem=1234396K)
[72.586s][debug][redefine,class,load               ] loading name=sandbox.DebugTest$Foo kind=102 (avail_mem=1234396K)
[72.586s][trace][redefine,class,normalize          ] Method matched: new: sandbox.DebugTest$Foo.&lt;init&gt;()V [0] == old: sandbox.DebugTest$Foo.&lt;init&gt;()V [0]
[72.586s][trace][redefine,class,normalize          ] Method matched: new: sandbox.DebugTest$Foo.m()Ljava/lang/String; [1] == old: sandbox.DebugTest$Foo.m()Ljava/lang/String; [1]
[72.586s][info ][redefine,class,constantpool       ] old_cp_len=53, scratch_cp_len=40
[72.586s][debug][redefine,class,constantpool       ] after pass 0: merge_cp_len=53
[72.586s][debug][redefine,class,constantpool       ] after pass 1a: merge_cp_len=53, scratch_i=40, index_map_len=0
[72.586s][info ][redefine,class,constantpool       ] merge_cp_len=53, index_map_len=0
[72.586s][debug][redefine,class,load               ] loaded name=sandbox.DebugTest$Foo (avail_mem=1234396K)
[72.586s][trace][redefine,class,obsolete,mark      ] EMCP_cnt=2, obsolete_cnt=0
[72.586s][trace][redefine,class,iklass,add         ] adding previous version ref for sandbox.DebugTest, EMCP_cnt=2
[72.586s][trace][redefine,class,iklass,purge       ] sandbox.DebugTest: previous versions
[72.586s][trace][redefine,class,iklass,purge       ] previous version 0x0000000800060458 is alive
[72.586s][trace][redefine,class,iklass,purge       ] previous methods length=2
[72.586s][trace][redefine,class,iklass,purge       ] purge: main(([Ljava/lang/String;)V): prev method @1 in version @0 is alive
[72.586s][trace][redefine,class,iklass,purge       ] previous version stats: live=1, deleted=0
[72.586s][trace][redefine,class,iklass,add         ] scratch class not added; no methods are running
[72.586s][info ][redefine,class,load               ] redefined name=sandbox.DebugTest, count=2 (avail_mem=1234396K)
[72.586s][trace][redefine,class,obsolete,mark      ] mark m(()Ljava/lang/String;) as obsolete
[72.586s][trace][redefine,class,obsolete,mark      ] EMCP_cnt=1, obsolete_cnt=1
[72.586s][trace][redefine,class,iklass,add         ] adding previous version ref for sandbox.DebugTest$Foo, EMCP_cnt=1
[72.586s][trace][redefine,class,iklass,add         ] scratch class not added; no methods are running
[72.586s][info ][redefine,class,update             ] adjust: name=sandbox.DebugTest$Foo
[72.586s][debug][redefine,class,update,constantpool] cpc special, static or dynamic entry update: &lt;init&gt;(()V)
[72.587s][info ][redefine,class,load               ] redefined name=sandbox.DebugTest$Foo, count=2 (avail_mem=1234396K)
[72.587s][trace][redefine,class,obsolete,metadata  ] calling check_class
[72.588s][info ][redefine,class,timer              ] vm_op: all=0  prologue=0  doit=0
[72.588s][info ][redefine,class,timer              ] redefine_single_class: phase1=0  phase2=0
[72.630s][debug][redefine,class,breakpoint         ] setting breakpoint in main(([Ljava/lang/String;)V)
[75.100s][debug][redefine,class,breakpoint         ] clearing breakpoint in main(([Ljava/lang/String;)V)  <i class="conum" data-value="10"></i><b>(10)</b>
[75.101s][debug][redefine,class,breakpoint         ] setting breakpoint in main(([Ljava/lang/String;)V)
[75.104s][stdout] m(): fable</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The JVM is already at breakpoint, first logs when the modified <code>Foo</code> is <em>reloaded</em>,
the logs gives nice insight on the machinery that is necessary to replace a simple method.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>There’s a lot of activity on the constant pool which is used by the JVM to find internal class
symbols, among other things.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Since I modified annotations, there’s some change to perform on this side too.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The new redefined class is actually loaded, yet not used.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The JVM identified two <strong>E</strong>quivalent <strong>M</strong>odulo <strong>C</strong>onstant <strong>P</strong>ool methods (i.e. the original method and
the method I just modified).</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The old method is obsoleted.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The redefinition is over, and sets again the breakpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>In debug simply continue to <em>the next step</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Once again modify the <code>m()</code> method and reload the class.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Class Is reloaded, continue.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>These logs are rarely useful unless you work with IDE, debuggers or the JVM itself.
However, they are interesting to understand what’s going on when debugging.
One thing to mention is that the JVMTI infrastructure relies a lot on the redefinition
component, it’s one of the most complex pieces in the JVM.</p>
</div>
</div>
<div class="sect3">
<h4 id="_just_in_time_and_compilation"><a class="anchor" href="#_just_in_time_and_compilation"></a><a class="link" href="#_just_in_time_and_compilation">Just-in-Time and compilation</a></h4>
<div class="paragraph">
<p>If you need to look in the compilation of methods, because something do not perform as
expected, one may want to toggle the logs for the just-in-time and compilation logs:</p>
</div>
<div class="listingblock">
<div class="title">Just-in-Time compilation and inlining</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ java -Xlog:jit*=debug,compilation*=debug -cp . JustStartMainTest
...
[0.053s][debug][jit,compilation      ]   30       3       java.util.ImmutableCollections$SetN$SetNIterator::hasNext (13 bytes)
[0.053s][debug][compilation,codecache] CodeHeap &#39;non-profiled nmethods&#39;: size=120032Kb used=2Kb max_used=2Kb free=120029Kb
[0.053s][debug][compilation,codecache] CodeHeap &#39;profiled nmethods&#39;: size=120028Kb used=36Kb max_used=36Kb free=119991Kb
[0.053s][debug][compilation,codecache] CodeHeap &#39;non-nmethods&#39;: size=5700Kb used=972Kb max_used=977Kb free=4727Kb
[0.053s][debug][jit,compilation      ]   31       3       java.util.ImmutableCollections$SetN$SetNIterator::nextIndex (56 bytes)
[0.053s][debug][compilation,codecache] CodeHeap &#39;non-profiled nmethods&#39;: size=120032Kb used=2Kb max_used=2Kb free=120029Kb
[0.053s][debug][compilation,codecache] CodeHeap &#39;profiled nmethods&#39;: size=120028Kb used=37Kb max_used=37Kb free=119990Kb
[0.053s][debug][compilation,codecache] CodeHeap &#39;non-nmethods&#39;: size=5700Kb used=972Kb max_used=977Kb free=4727Kb
[0.053s][debug][jit,compilation      ]   32       3       java.util.ImmutableCollections$SetN$SetNIterator::next (47 bytes)
[0.053s][debug][jit,inlining         ]                               @ 1   java.util.ImmutableCollections$SetN$SetNIterator::hasNext (13 bytes)
[0.053s][debug][jit,inlining         ]                               @ 15   java.util.ImmutableCollections$SetN$SetNIterator::nextIndex (56 bytes)   callee is too large
[0.053s][debug][jit,inlining         ]                               @ 43  java/util/NoSuchElementException::&lt;init&gt; (not loaded)   not inlineable
[0.054s][debug][compilation,codecache] CodeHeap &#39;non-profiled nmethods&#39;: size=120032Kb used=2Kb max_used=2Kb free=120029Kb
[0.054s][debug][compilation,codecache] CodeHeap &#39;profiled nmethods&#39;: size=120028Kb used=38Kb max_used=38Kb free=119989Kb
[0.054s][debug][compilation,codecache] CodeHeap &#39;non-nmethods&#39;: size=5700Kb used=972Kb max_used=977Kb free=4727Kb
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above log snippet shows that the JVM is</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>compiling methods <code>next</code> and <code>hasNext</code>,</p>
</li>
<li>
<p>then tries to inline <code>hasNext</code> into <code>next</code>,</p>
</li>
<li>
<p>then tries to inline <code>nextIndex</code> into next but fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This article has been written using the code base of JDK11u 11.0.8. Not everything is
logged via the unified logging mechanism, and I don’t think this changed in recent JDK
versions e.g. JDK 15 which is not yet out at this time.</p>
</div>
<div class="paragraph">
<p>So, for example if you need to work with the JVM C2 compiler for some reason then
<code>-Xlog:jit*=debug,compilation*=debug</code> might not be enough, instead you’ll need to use
<code>-XX:+LogCompilation</code>, which by default will generate a file like <code>hotspot_pid{pid}.log</code>
in the working directory, unless this flag <code>-XX:LogFile=compilation-log.xml</code> is specified.
The content of this file is actually an XML document.</p>
</div>
</div>
<div class="sect3">
<h4 id="_safepoints_and_jvm_operations"><a class="anchor" href="#_safepoints_and_jvm_operations"></a><a class="link" href="#_safepoints_and_jvm_operations">Safepoints and JVM operations</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DebugTest {
    public static void main(String[] args) {
        System.out.printf(&#34;[%.3fs][stdout] ping%n&#34;, ManagementFactory.getRuntimeMXBean().getUptime() / 1000d);
        System.out.printf(&#34;[%.3fs][stdout] pong%n&#34;, ManagementFactory.getRuntimeMXBean().getUptime() / 1000d); <i class="conum" data-value="1"></i><b>(1)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>breakpoint</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When debugging for example this simple program, we see already a lot of activity performed by the JVM
using <code>-Xlog:safepoint*=info</code>, I found that <code>vmoperation</code> is not quite useful as a user, as the
<code>safepoint</code> logs provides enough data.</p>
</div>
<div class="listingblock primary">
<div class="title">ThreadsSuspendJVMTI</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[0.072s][info ][safepoint] Entering safepoint region: ThreadsSuspendJVMTI <i class="conum" data-value="1"></i><b>(1)</b>
[0.072s][info ][safepoint,cleanup] deflating idle monitors, 0.0000001 secs
[0.072s][info ][safepoint,cleanup] updating inline caches, 0.0000148 secs
[0.072s][info ][safepoint,cleanup] compilation policy safepoint handler, 0.0000003 secs
[0.072s][info ][safepoint,cleanup] purging class loader data graph, 0.0000001 secs
[0.072s][info ][safepoint,cleanup] resizing system dictionaries, 0.0000002 secs
[0.072s][info ][safepoint,cleanup] safepoint cleanup tasks, 0.0000555 secs
[0.072s][info ][safepoint        ] Leaving safepoint region
[0.072s][info ][safepoint        ] Total time for which application threads were stopped: 0.0000831 seconds, Stopping threads took: 0.0000083 seconds <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Name of the VM operation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Summary of the JVM stopped time</td>
</tr>
</tbody></table>
</div>
<div class="listingblock secondary">
<div class="title">ChangeBreakpoints</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[0.072s][info ][safepoint        ] Application time: 0.0001442 seconds
[0.072s][info ][safepoint        ] Entering safepoint region: ChangeBreakpoints
[0.072s][info ][safepoint,cleanup] deflating idle monitors, 0.0000001 secs
[0.072s][info ][safepoint,cleanup] updating inline caches, 0.0000001 secs
[0.072s][info ][safepoint,cleanup] compilation policy safepoint handler, 0.0000002 secs
[0.072s][info ][safepoint,cleanup] purging class loader data graph, 0.0000001 secs
[0.072s][info ][safepoint,cleanup] resizing system dictionaries, 0.0000001 secs
[0.072s][info ][safepoint,cleanup] safepoint cleanup tasks, 0.0000210 secs
[0.072s][info ][safepoint        ] Leaving safepoint region
[0.072s][info ][safepoint        ] Total time for which application threads were stopped: 0.0000686 seconds, Stopping threads took: 0.0000124 seconds</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">EnableBiasedLocking</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[0.117s][info ][safepoint        ] Application time: 0.0446646 seconds
[0.117s][info ][safepoint        ] Entering safepoint region: EnableBiasedLocking
[0.117s][info ][safepoint,cleanup] deflating idle monitors, 0.0000002 secs
[0.117s][info ][safepoint,cleanup] updating inline caches, 0.0000003 secs
[0.117s][info ][safepoint,cleanup] compilation policy safepoint handler, 0.0000004 secs
[0.117s][info ][safepoint,cleanup] purging class loader data graph, 0.0000001 secs
[0.117s][info ][safepoint,cleanup] resizing system dictionaries, 0.0000003 secs
[0.117s][info ][safepoint,cleanup] safepoint cleanup tasks, 0.0000390 secs
[0.117s][info ][safepoint        ] Leaving safepoint region
[0.117s][info ][safepoint        ] Total time for which application threads were stopped: 0.0000901 seconds, Stopping threads took: 0.0000048 seconds</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">RevokeBias</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[0.127s][info ][safepoint        ] Application time: 0.0099803 seconds
[0.127s][info ][safepoint        ] Entering safepoint region: RevokeBias
[0.127s][info ][safepoint,cleanup] deflating idle monitors, 0.0000002 secs
[0.127s][info ][safepoint,cleanup] updating inline caches, 0.0000055 secs
[0.127s][info ][safepoint,cleanup] compilation policy safepoint handler, 0.0000004 secs
[0.127s][info ][safepoint,cleanup] purging class loader data graph, 0.0000001 secs
[0.127s][info ][safepoint,cleanup] resizing system dictionaries, 0.0000003 secs
[0.127s][info ][safepoint,cleanup] safepoint cleanup tasks, 0.0000486 secs
[0.127s][info ][safepoint        ] Leaving safepoint region
[0.127s][info ][safepoint        ] Total time for which application threads were stopped: 0.0000974 seconds, Stopping threads took: 0.0000069 seconds</code></pre>
</div>
</div>
<div class="paragraph">
<p>These are the very first snippets of logs about safepoint during a quick debug, but there are a lot more
reasons.</p>
</div>
<div class="paragraph">
<p>Safepoint logging is useful if the application is regularly stopped, but the GC is not the root cause.
So it’s useful to always log safepoints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ grep &#34;Entering safepoint&#34; /var/log/2020-01-28_13-36-23-vm.log
[6.880s][info ][safepoint     ] Entering safepoint region: Deoptimize
[6.880s][info ][safepoint        ] Entering safepoint region: Deoptimize
[6.884s][info ][safepoint        ] Entering safepoint region: Deoptimize
[7.231s][info ][safepoint        ] Entering safepoint region: Deoptimize
[7.277s][info ][safepoint        ] Entering safepoint region: Deoptimize
[7.481s][info ][safepoint        ] Entering safepoint region: Deoptimize
[7.913s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[7.935s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[7.979s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.001s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.023s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.051s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.075s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.102s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.154s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[8.317s][info ][safepoint        ] Entering safepoint region: Deoptimize
[8.637s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[8.892s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[9.251s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[9.450s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.482s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.505s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.508s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.572s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.574s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.750s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.753s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.817s][info ][safepoint        ] Entering safepoint region: Deoptimize
[9.885s][info ][safepoint        ] Entering safepoint region: FindDeadlocks
[10.650s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[10.669s][info ][safepoint        ] Entering safepoint region: Deoptimize
[11.131s][info ][safepoint        ] Entering safepoint region: Deoptimize
[11.166s][info ][safepoint        ] Entering safepoint region: Deoptimize
[11.407s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[11.870s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[11.979s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[12.344s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[12.394s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[12.435s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[12.484s][info ][safepoint        ] Entering safepoint region: Deoptimize
[12.488s][info ][safepoint        ] Entering safepoint region: Deoptimize
[12.494s][info ][safepoint        ] Entering safepoint region: Deoptimize
[12.789s][info ][safepoint        ] Entering safepoint region: RedefineClasses
[13.143s][info ][safepoint        ] Entering safepoint region: JFRCheckpoint
[13.147s][info ][safepoint        ] Entering safepoint region: JFROldObject
[13.155s][info ][safepoint        ] Entering safepoint region: ClassLoaderStatsOperation
[13.165s][info ][safepoint        ] Entering safepoint region: EnableBiasedLocking
[13.190s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[13.201s][info ][safepoint        ] Entering safepoint region: Deoptimize
[13.352s][info ][safepoint        ] Entering safepoint region: Deoptimize
[14.133s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[14.134s][info ][safepoint        ] Entering safepoint region: Deoptimize
[14.453s][info ][safepoint        ] Entering safepoint region: Deoptimize
[14.463s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[14.728s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[15.211s][info ][safepoint        ] Entering safepoint region: RevokeBias
...
[15.303s][info ][safepoint        ] Entering safepoint region: RevokeBias
[15.305s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[15.329s][info ][safepoint        ] Entering safepoint region: RevokeBias
...
[15.397s][info ][safepoint        ] Entering safepoint region: RevokeBias
[15.400s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[15.407s][info ][safepoint        ] Entering safepoint region: RevokeBias
...
[15.473s][info ][safepoint        ] Entering safepoint region: RevokeBias
[15.473s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[15.484s][info ][safepoint        ] Entering safepoint region: RevokeBias
[15.485s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[15.616s][info ][safepoint        ] Entering safepoint region: RevokeBias
...
[17.756s][info ][safepoint        ] Entering safepoint region: RevokeBias
[17.756s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[17.868s][info ][safepoint        ] Entering safepoint region: RevokeBias
[17.928s][info ][safepoint        ] Entering safepoint region: Deoptimize
[17.954s][info ][safepoint        ] Entering safepoint region: Deoptimize
[18.727s][info ][safepoint        ] Entering safepoint region: G1CollectForAllocation
[18.980s][info ][safepoint        ] Entering safepoint region: Deoptimize
[19.555s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[19.744s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[19.972s][info ][safepoint        ] Entering safepoint region: RevokeBias
...
[20.330s][info ][safepoint        ] Entering safepoint region: RevokeBias
[20.548s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[20.693s][info ][safepoint        ] Entering safepoint region: BulkRevokeBias
[21.562s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[22.563s][info ][safepoint        ] Entering safepoint region: Cleanup
[22.776s][info ][safepoint        ] Entering safepoint region: Deoptimize
[23.252s][info ][safepoint        ] Entering safepoint region: Deoptimize
[23.763s][info ][safepoint        ] Entering safepoint region: RevokeBias
[23.819s][info ][safepoint        ] Entering safepoint region: RevokeBias
[24.183s][info ][safepoint        ] Entering safepoint region: Deoptimize
[24.437s][info ][safepoint        ] Entering safepoint region: Deoptimize
[24.542s][info ][safepoint        ] Entering safepoint region: FindDeadlocks
[24.543s][info ][safepoint        ] Entering safepoint region: FindDeadlocks
[25.361s][info ][safepoint        ] Entering safepoint region: Deoptimize
[26.319s][info ][safepoint        ] Entering safepoint region: Deoptimize
[27.006s][info ][safepoint        ] Entering safepoint region: Deoptimize
[27.163s][info ][safepoint        ] Entering safepoint region: Deoptimize
[27.438s][info ][safepoint        ] Entering safepoint region: Deoptimize
[28.316s][info ][safepoint        ] Entering safepoint region: Deoptimize
[28.800s][info ][safepoint        ] Entering safepoint region: ICBufferFull
[29.801s][info ][safepoint        ] Entering safepoint region: Cleanup
[30.523s][info ][safepoint        ] Entering safepoint region: RevokeBias
...
[41.174s][info ][safepoint        ] Entering safepoint region: FindDeadlocks
...
[51.716s][info ][safepoint        ] Entering safepoint region: G1CollectForAllocation
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>There’s a lot of activity. Most of this VM activity will be easier to analyze
using JFR / JDK Mission Control, but for logging very long running processes, logs are still
quite useful.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_programmatic_access"><a class="anchor" href="#_programmatic_access"></a><a class="link" href="#_programmatic_access">Programmatic access</a></h3>
<div class="paragraph">
<p>For those that played with <code>jcmd</code> before you may already know all commands
are available as MXBeans. This immediately suggests that it’s possible to invoke
these command programmatically.</p>
</div>
<div class="listingblock">
<div class="title">Enable GC logging programmatically</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.management.InstanceNotFoundException;
import javax.management.IntrospectionException;
import javax.management.MBeanException;
import javax.management.MBeanInfo;
import javax.management.MalformedObjectNameException;
import javax.management.ObjectName;
import javax.management.ReflectionException;
import java.lang.management.ManagementFactory;

public class TriggerGcLogsProgrammatically {
    public static void main(String[] args) throws Exception {
        // jcmd $(pidof java) VM.log what=gc*=debug decorators=uptime,tags,level output=stderr
        executeDcmd(&#34;vmLog&#34;, <i class="conum" data-value="1"></i><b>(1)</b>
                    &#34;what=gc*=trace&#34;, <i class="conum" data-value="2"></i><b>(2)</b>
                    &#34;decorators=uptime,tags,level&#34;, <i class="conum" data-value="3"></i><b>(3)</b>
                    &#34;output=stderr&#34;); <i class="conum" data-value="4"></i><b>(4)</b>

        // jcmd $(pidof java) VM.log list
        System.out.printf(&#34;%s%n&#34;, executeDcmd(&#34;vmLog&#34;, &#34;list&#34;));
    }

    private static String executeDcmd(String operationName, String... params) throws Exception {
        var objectName = new ObjectName(&#34;com.sun.management:type=DiagnosticCommand&#34;);
        var mbeanServer = ManagementFactory.getPlatformMBeanServer();

        return (String) mbeanServer.invoke(objectName,
                                           operationName,
                                           new Object[]{params},
                                           new String[]{String[].class.getName()});
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Equivalent to <code>VM.log</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Tag selection with their level configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Decorators</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Output section</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wrap_up"><a class="anchor" href="#_wrap_up"></a><a class="link" href="#_wrap_up">Wrap up</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unified logging is a great change in the JVM: Its flexibility and ubiquity
gives great insight in the JVM. Also, a strong point of this implementation
is dynamic configuration change: It is very useful when one doesn’t want to
restart a process just to raise the logging levels, or to gain insight on
a JVM component.</p>
</div>
<div class="paragraph">
<p>Yet not everyone will be interested in most of these subsystems. I’m pretty sure
GC logs will be the most used logs. On this in particular, I think JDK maintainers
should add tags for the type of GC, <code>cms</code> for CMS, <code>zgc</code> for ZGC, <code>g1</code> for G1GC,
<code>shenandoah</code> for Shenandoah, etc.</p>
</div>
<div class="paragraph">
<p>In that regard I believe the new system lacks good default options for logging.
As seen above it’s easy to miss valuable information by being too restrictive with
the tags. The removed GC logging flags were more explicit.</p>
</div>
<div class="paragraph">
<p>In particular, I think unified logging suffers from few drawbacks:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> discoverability: while anyone can peek at the available tags the mass of
the tags makes the system hard to use if you don’t know already what to expect
from these tags.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> documentation: tags are not documented, most don’t auto-document themselves
so if you don’t know already what to expect from these tags you’ll need to take the
long road to try each combination.</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> stability: while the JVM checks if the selected tags exists it doesn’t check
if the combination will log something. On each JDK version logs can change in subtle
ways for whatever reasons (like bug-fixing). It’s best to verify on each new JDK version
if things changed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Command line flags provided a good user experience, they were discoverable because
documented, they were explicit, and usually stable. These flags are gone for GC logging,
but there are still some old <code>Trace*</code> flags that setup unified logging. If
JDK maintainers chose to keep the old flags or proposed alternative flags for GC
that would have made unified logging use more practical I think.</p>
</div>
<div class="paragraph">
<p><em>If you spot anything incorrect please leave a message to fix the issue.</em></p>
</div>
</div>
</div>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2020/06/28/using-jdk-flight-recorder-and-jdk-mission-control/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Using JDK FlightRecorder and JDK Mission Control</span>
    </a>
    
    
    <a href="/2020/10/23/read-network-addresses-in-procfs/" class="navigation-next">
      <span class="navigation-tittle">Reads network addresses in /proc</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
        
        
        
        this.page.identifier = 'https://blog.arkey.fr/2020/07/28/embracing-jvm-unified-logging-jep-158-jep-271/';
        this.page.title = 'Embracing JVM unified logging (JEP-158 \/ JEP-271)';
        this.page.url = 'https://blog.arkey.fr/2020/07/28/embracing-jvm-unified-logging-jep-158-jep-271/';
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "thecoffeeworkshop" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>


            
    
<footer>

 
 
 <div class="github-edit">
     <a href="https://github.com/bric3/bric3.github.io/edit/hugo-sources/content/posts/2020-07-28-embracing-jvm-unified-logging.adoc">
     <i class="fab fa-github fa-lg" aria-hidden="true"></i> Edit this page
     </a>
 </div>
 




















<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: { inlineMath: [["\\(", "\\)"]], displayMath: [["\\[", "\\]"]], ignoreClass: "nostem|nolatexmath" },
  asciimath2jax: { delimiters: [["\\$", "\\$"]], ignoreClass: "nostem|noasciimath" },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js" integrity="sha512-M36RUChWzAh1veeenRZFql7HydLEnkYmoloiCvVrhz402UZgKI93qkV7SsaxtVKdN95Wzajh39ysrXCq34NTsg==" crossorigin="anonymous"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/config/TeX-MML-AM_HTMLorMML-full.min.js" integrity="sha512-SdNVJmCczXFqz3Iok8gP+cloe2CScrnHJczMBwL+aSrdZVllRNqRJ5A2p83S4fUM8I4endIZgM2ZIkwNqb3Eew==" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js" integrity="sha512-DrpaExP2d7RJqNhXB41Q/zzzQrtb6J0zfnXD5XeVEWE8d9Hj54irCLj6dRS3eNepPja7DvKcV+9PnHC7A/g83A==" crossorigin="anonymous"></script>
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    

<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js" integrity="sha256-vrn14y7WH7zgEElyQqm2uCGSQrX/xjYDjniRUQx3NyU=" crossorigin="anonymous"></script>
<script type="text/javascript">
function addBlockSwitches() {
	$('.primary').each(function() {
		primary = $(this);
		createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
		primary.children('.title').remove();
	});
	$('.secondary').each(function(idx, node) {
		secondary = $(node);
		primary = findPrimary(secondary);
		switchItem = createSwitchItem(secondary, primary.children('.switch'));
		switchItem.content.addClass('hidden');
		findPrimary(secondary).append(switchItem.content);
		secondary.remove();
	});
}

function createBlockSwitch(primary) {
	blockSwitch = $('<div class="switch"></div>');
	primary.prepend(blockSwitch);
	return blockSwitch;
}

function findPrimary(secondary) {
	candidate = secondary.prev();
	while (!candidate.is('.primary')) {
		candidate = candidate.prev();
	}
	return candidate;
}

function createSwitchItem(block, blockSwitch) {
	blockName = block.children('.title').text();
	content = block.children('.content').first().append(block.next('.colist'));
	item = $('<div class="switch--item">' + blockName + '</div>');
	blockSwitch.append(item);
	return {'item': item, 'content': content};
}

function globalSwitch() {
	$('.switch--item').each(function() {
		var blockId = blockIdForSwitchItem($(this));
		$(this).off('click');
		$(this).on('click', function() {
			selectedText = $(this).text()
			window.localStorage.setItem(blockId, selectedText);
			$(".switch--item").filter(function() {
				return blockIdForSwitchItem($(this)) === blockId;
			}).filter(function() {
				return $(this).text() === selectedText;
			}).each(function() {
				select($(this))
			});
		});
		if ($(this).text() === window.localStorage.getItem(blockId)) {
			select($(this))
		}
	});
}

function blockIdForSwitchItem(item) {
	idComponents = []
	idComponents.push(item.text().toLowerCase());
	item.siblings(".switch--item").each(function(index, sibling) {
		idComponents.push($(sibling).text().toLowerCase());
	});
	return idComponents.sort().join("-")
}

function select(selected) {
	selected.addClass('selected');
	selected.siblings().removeClass('selected');
	selectedContent = selected.parent().siblings(".content").eq(selected.index())
	selectedContent.removeClass('hidden');
	selectedContent.siblings().addClass('hidden');
}

$(addBlockSwitches);
$(globalSwitch);
</script>





</footer>

    



        </div>
    </body>
</html>

