<!DOCTYPE html>
<html lang="en-US">
    
    


    <head>
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://oss.maxcdn.com">
    <link rel="dns-prefetch" href="https://www.gravatar.com">

    <link href="https://gmpg.org/xfn/11" rel="profile">
    
    <link rel="canonical" href="https://blog.arkey.fr/2010/02/09/a-propos-de-joda-time/">
    

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.82.1" />

    
    
    

<title>A propos de Joda-Time â€¢ Brice Dutheil</title>













    
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Brice Dutheil">
<meta property="og:title" content="A propos de Joda-Time">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blog.arkey.fr/2010/02/09/a-propos-de-joda-time/" />
<meta property="og:description" content="Java mostly, and general tech">
<meta property="og:image" content="https://blog.arkey.fr/social-sharing.png">
<meta property="og:image:type" content="image/png">
    
    
    
<meta property="og:image:width" content="512">
<meta property="og:image:height" content="512">
    

<meta property="og:updated_time" content="2010-02-09T17:32:06Z">



<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@BriceDutheil">
<meta name="twitter:title" content="A propos de Joda-Time">

<meta name="twitter:image" content="https://blog.arkey.fr/social-sharing.png">

<meta name="twitter:description" content="Java mostly, and general tech">
<meta name="twitter:creator" content="@BriceDutheil">
    
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/a11y-light.min.css" media="(prefers-color-scheme: light)"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/gruvbox-dark.min.css" media="(prefers-color-scheme: dark)">




<link rel="stylesheet" href="/scss/ascii-press.d6bafe0d39194a15e5deee39d0dad5d2118d57cf6ace33b94bb9dbfda6ab0415.css" integrity="sha256-1rr&#43;DTkZShXl3u450NrV0hGNV89qzjO5S7nb/aarBBU=">


<link rel="stylesheet" href="/scss/ascii-press-dark.06869de8a04135a809635aeb8b272847be96c60ddaa9197e026e19efe21e6909.css" integrity="sha256-Boad6KBBNagJY1rriycoR76Wxg3aqRl&#43;Am4Z7&#43;IeaQk=" media="(prefers-color-scheme: dark)">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">




<link rel="stylesheet" href="/scss/hugo-toc.d31afb68f96b4b4a16c6def81c6cfb18992a6924bd88766a480bb24a08ca5796.css" integrity="sha256-0xr7aPlrS0oWxt74HGz7GJkqaSS9iHZqSAuySgjKV5Y=">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Icons from https://realfavicongenerator.net -->
<link rel="icon" href="/favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#b64f4f">
<meta name="theme-color" content="#b64f4f">



    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/v4-shims.min.css" integrity="sha512-KNosrY5jkv7dI1q54vqk0N3x1xEmEn4sjzpU1lWL6bv5VVddcYKQVhHV08468FK6eBBSXTwGlMMZLPTXSpHYHA==" crossorigin="anonymous" />

    
    

</head>


    <body class="">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://blog.arkey.fr">Brice Dutheil</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/f31c7fbcbb0766d0632d96fd7e74b649?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Java mostly, and general tech 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Brice Dutheil</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/"><span class='fa-icon'><i class='fas fa-home'></i></span><code>cd <em>~</em></code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/"><span class='fa-icon'><i class='fas fa-stream'></i></span><code>ls <em>posts/*</em></code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/series/"><span class='fa-icon'><i class='fas fa-list-alt'></i></span><code>grep -o <em>series</em> posts/* | sort -u</code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/"><span class='fa-icon'><i class='fas fa-tags'></i></span><code>grep -o <em>tags</em> posts/* | sort -u</code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/cool-stuff/"><span class='fa-icon'><i class='fas fa-thumbtack'></i></span><code>cd <em>cool-stuff</em></code>
						<span></span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/whoami/"><span class='fa-icon'><i class='fas fa-id-card'></i></span><code>whoami</code>
						<span></span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/BriceDutheil" rel="me"><i class="fa-w-16" aria-hidden="true"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bird" class="svg-inline--fa fa-bird fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></i></a>
	
	
	
	<a href="https://github.com/bric3" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://speakerdeck.com/bric3" rel="me"><i class="fab fa-speaker-deck" aria-hidden="true"></i></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/dutheilbrice" rel="me"><i class="fa-w-16" aria-hidden="true"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="pro-network" class="svg-inline--fa fa-pro-network fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></i></a>
	
	
	<a href="https://stackoverflow.com/users/48136/brice" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>

  </div>
  <div class="container fixed-container">
    
<div class="copyright">
  &copy; 2010 - 2022 Brice Dutheil
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>



  </div>
</div>

        <div class="content container">
            
    <header>

 
 
 <div class="github-edit">
     <a href="https://github.com/bric3/bric3.github.io/edit/hugo-sources/content/posts/2010-02-09-a-propos-de-joda-time.md">
     <i class="fab fa-github fa-lg" aria-hidden="true"></i> Edit this page
     </a>
 </div>
 


</header>

            
    

<article>
  <header>
    <h1>A propos de Joda-Time</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> 2010-02-09
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/code">code</a>
           
      
          <a class="badge badge-tag" href="/tags/joda-time">joda-time</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 13 min read

    
    
    

</div>


  </header>
  
  
  
    <div class="toc-wrapper">
      <input type="checkbox" id="tocToggle" checked>
      <label for="tocToggle"><i class="fas fa-list-ul fa-lg"></i><span id="toc-title">On this page</span></label>
      <div id="toc-toggle-cover"></div>

      
          <nav id="TableOfContents">
  <ul>
    <li><a href="#alors-que-peut-on-faire-avec-joda-time">Alors que peut-on faire avec Joda-Time</a></li>
  </ul>
</nav>
      
    </div>
  
  
  
  <div class="post md">
    <p>Je suis un peu surpris de voir que beaucoup de dÃ©veloppeurs utilisent encore Ã©normÃ©ment l&rsquo;API temps du JDK. C&rsquo;est la raison pour laquelle j&rsquo;ajoute une nouvelle entrÃ©e sur le web Ã  ce sujet.</p>
<p>Ce n&rsquo;est une nouvelle pour personne qui connait Java un minimum que les classes <strong>java.util.Calendar</strong> et <strong>java.util.Date</strong> ne sont pas pratique Ã  utiliser. Mais en plus de Ã§a, leur implÃ©mentation laisse Ã  dÃ©sirer, elles ne sont pas thread-safe, leur performanceestÂ  au mieux variable et, &hellip; elles sont surtout buggÃ©es (mÃªme dans le dernier JDK). N&rsquo;oublions non plus de mettre dans le lot le <strong>SimpleDateFormat</strong>, qui n&rsquo;est bien sur lui aussi pas thread-safe. Et je ne parle pas des classes <strong>java.sql.Date</strong>, <strong>java.sql.Time</strong> et <strong>java.sql.Timestamp</strong> dont leur implÃ©mentation est fondÃ©e sur <strong>java.util.Date</strong>, ce qui leur donne droit Ã  une implÃ©mentation un peu Ã©tonnante.</p>
<p>Malheureusement comme ces classes font partie du JDK depuis trÃ¨s longtemps et qu&rsquo;elle ne sont toujours pas dÃ©prÃ©ciÃ©e, ces classes restent, et leur bug aussi, ou d&rsquo;autres sont crÃ©Ã©s. Vous l&rsquo;avez compris ces classes sont a Ã©viter.</p>
<p>Heureusement une API a Ã©mergÃ© il y a quelques annÃ©es pour fournir une implÃ©mentation d&rsquo;une API Temps solide, performante, consistante et agrÃ©able Ã  utiliser. Il s&rsquo;agit de Joda-Time. Cette API a Ã©tÃ© la fondation ou plutÃ´t un exercice intellectuel, pour l&rsquo;implÃ©mentation de rÃ©fÃ©rence de la <a href="http://jcp.org/en/jsr/detail?id=310">JSR-310</a>. Aujourd&rsquo;hui cette implÃ©mentation de rÃ©fÃ©rence est un peu diffÃ©rente de celle de Joda-Time, et avec raison Joda-Time a aussi quelques dÃ©fauts.</p>
<p>Cela dit en attendant que cette JSR soit effectivement intÃ©grÃ©e Ã  une version officielle du JDK, on pourra se contenter de Joda-Time qui reste pour le moment la meilleure API Temps.</p>
<h2 id="alors-que-peut-on-faire-avec-joda-time">Alors que peut-on faire avec Joda-Time</h2>
<p>Pour commencer, on peut remplacer les appels Ã </p>
<pre><code class="language-java">Calendar cal = Calendar.getInstance();
Date date = new Date();
</code></pre>
<p>par les appels suivant, on peut jouer un peu avec l&rsquo;API :</p>
<pre><code class="language-java">DateTime now = new DateTime();
DateTime inYear2000 = now.withYear(2000);
DateTime twoHoursAndOneMinuteLater = now.plusHours(2).plusMinutes(1);
</code></pre>
<p>Comme l&rsquo;objet String, <strong>DateTime</strong> est immutable, des nouvelles instances sont crÃ©Ã©s Ã  chaque fois, ce qui veut Ã©galement dire que l&rsquo;objet est thread-safe. Dans Joda-Time, <strong>DateTime</strong> reprÃ©sente un instant (interface <strong>ReadableInstant</strong>).</p>
<p>Les autres classes reprÃ©sentant des instants sont <strong>Instant</strong> et <strong>DateMidnight</strong>. <strong>Instant</strong> correspond juste Ã  un instant en milliseconde depuis 1970. <strong>DateMidnight</strong> est un instant ou l&rsquo;heure est positionnÃ©e Ã  minuit.</p>
<pre><code class="language-java">DateTime _2010 = new DateTime(&quot;2010-01-01T00:00:00&quot;);
DateMidnight _2010midnight = new DateMidnight(&quot;2010-01-01T00:00:00&quot;);
DateMidnight _2010stillMidnight = new DateMidnight(&quot;2010-01-01T20:34:00&quot;);

_2010.equals(_2010midnight); // true
_2010.equals(_2010stillMidnight); //true
_2010.withZone(DateTimeZone.forOffsetHours(2)).equals(_2010midnight); //false
</code></pre>
<p>Ou avec les instants :</p>
<pre><code class="language-java">Instant _2010instant = new Instant(_2010);

_2010.equals(_2010instant); // false
_2010.withZone(DateTimeZone.UTC).equals(_2010instant); // true
</code></pre>
<p>Observez les diffÃ©rence de TimeZone, en effet par dÃ©faut si la TimeZone n&rsquo;est pas prÃ©cisÃ©e, il s&rsquo;agira de la zone locale.</p>
<p>On peut jouer avec les propriÃ©tÃ©s de ces objets, par exemple :</p>
<pre><code class="language-java">_2010midnight.monthOfYear().getAsText(); // janvier
_2010midnight.monthOfYear().getAsText(Locale.GERMAN); // Januar
_2010midnight.monthOfYear().getDifference(new DateMidnight(&quot;2009-04-10&quot;)); // 8
</code></pre>
<p>Un peu plus sympa c&rsquo;est la gestion des intervalles / durÃ©es / pÃ©riodes.</p>
<pre><code class="language-java">Duration _30daysDuration = Duration.standardDays(30);
new DateMidnight(&quot;2010-01-31&quot;).equals(_2010.plus(_30daysDuration)); // true
new DateMidnight(&quot;2010-03-02&quot;).equals(_2010.plus(_30daysDuration).plus(_30daysDuration)); // true

Period _1month = Period.months(1);
new DateMidnight(&quot;2010-02-01&quot;).equals(_2010.plus(_1month)); // true
new DateMidnight(&quot;2010-03-01&quot;).equals(_2010.plus(_1month).plus(_1month)); // true
</code></pre>
<p>Joda-Time apporte Ã©galement des objets dont les concepts ne concerne qu&rsquo;une date ou que le temps. Il est facile de convertir un instant vers un de ces objets.</p>
<pre><code class="language-java">// _2010 = &quot;2010-01-01T00:00:00+01:00&quot; car timezone locale
_2010.withZone(DateTimeZone.forID(&quot;Europe/London&quot;)).toLocalDate(); // 2009-12-31
_2010.toLocalDate(); // 2010-01-01

LocalTime _15h28 = new LocalTime(&quot;15:28&quot;);
_15h28.isAfter(new DateTime(&quot;2010-01-01T00:00:00&quot;).toLocalTime()); // true
</code></pre>
<p>Joda-Time offre aussi un petit utilitaire qui permet de vÃ©rifier certains comportement dÃ©pendant du temps :</p>
<pre><code class="language-java">DateTime now = new DateTime();
DateTimeUtils.setCurrentMillisOffset(-60 * 60 * 1000); // - 1h
DateTime past = new DateTime();
past.isAfter(now); // false
past.isAfter(System.currentTimeMillis()); // false
</code></pre>
<p>Modifier le temps Ã  travers cette API change seulement le temps dans pour la JVM courante, et non sur le systÃ¨me.</p>
<p>Formater une date, pour rappel <strong>DateTimeFormat</strong> est thread-safe et gÃ©nÃ¨re Ã©galement des objets thread-safe, la documentation indique aussi la prÃ©sence d&rsquo;un <strong>DateTimeFormatterBuilder</strong> pour construire des formatter plus complexes.</p>
<pre><code class="language-java">DateTimeFormatter fmt = DateTimeFormat.forPattern(&quot;yyyyMMdd&quot;);
DateTimeFormatter frenchFmt = fmt.withLocale(Locale.FRENCH);
DateTimeFormatter germanFmt = fmt.withLocale(Locale.GERMAN);

fmt.print(new DateTime());
frenchFmt.parseDateTime(&quot;20100208&quot;)
</code></pre>
<p>Ah j&rsquo;allais oublier comment passer des objets du JDK vers les objets Joda-Time et vice-versa :</p>
<pre><code class="language-java">Calendar now = new DateTime().toGregorianCalendar();
Date date = new DateTime(now).toDate();
date = new LocalDate().toDate();
Calendar todayAt5 = new LocalTime(now).withHourOfDay(5).toDateTimeToday().toGregorianCalendar();
Calendar tomorowAt5 = new LocalTime(now).withHourOfDay(5).toDateTime(new DateTime().plusDays(1)).toGregorianCalendar();
</code></pre>
<p>Ce genre de manipulation, bien que relativement aisÃ©e grÃ¢ce Ã  Joda-Time, sont pÃ©nible pas trÃ¨s Ã©lÃ©gantes, et finalement elle pÃ©nalise bÃªtement les performances en repassant aux objets du JDK, il est donc prÃ©fÃ©rable d&rsquo;utiliser tout au long de l&rsquo;application des objet Joda-Time et de n&rsquo;utiliser que des objets du JDK lorsque celÃ  est nÃ©cessaire.</p>
<p>Comme vous venez de le voir, Joda-Time offre un belle API, celle-ci a certainement ses dÃ©fauts, mais elle offre un bel avantage sur les autres pour sa fluiditÃ© de concepts, son efficacitÃ© ou sa clartÃ©. En attendant que la JSR-310 soit intÃ©grÃ©e au JDK, et que ce JDK soit dÃ©clinÃ© dans sa version J2EE, cette API a encore une belle vie devant elle.</p>
<p>Cela dit pour certaines utilisations spÃ©cifiques, il faudra faire attention Ã  ces objets, j&rsquo;ai vu passer des mailing list sur Terracota qui parlent justement de Joda-Time et de leurs problÃ¨mes rencontrÃ©s. Encore une fois il s&rsquo;agit d&rsquo;un cas particulier ou en plus la JVM est instrumentÃ©e.</p>
<p>Pour ceux que Ã§a intÃ©resse, il semblerait que les besoins dans le monde de la finance sont un peu plus poussÃ©s. Je ne connais pas bien ces <em>dates financiÃ¨res</em>. En tous cas il existe une bibliothÃ¨que ayant ce support, c&rsquo;est <strong>jFin</strong>.</p>
<p>Ã‰galement aussi, une librairie de tag JSP permet d&rsquo;utiliser Ã  pleine puissance les objets de Joda-Time dans les JSP.</p>
<p>Pour finir, j&rsquo;ai dit une bÃªtise, il y a d&rsquo;autres choses Ã  ajouter, faites vous plaisir avec les commentaires.</p>
<p>Sources:</p>
<ul>
<li><a href="http://www.wolkje.net/2010/01/06/java-date-and-time-api-and-jsr-310/">http://www.wolkje.net/2010/01/06/java-date-and-time-api-and-jsr-310/</a></li>
<li><a href="http://www.jroller.com/scolebourne/entry/why_jsr_310_isn_t">http://www.jroller.com/scolebourne/entry/why_jsr_310_isn_t</a></li>
<li><a href="http://joda-time.sourceforge.net/">http://joda-time.sourceforge.net/</a></li>
<li><a href="http://joda-time.sourceforge.net/contrib/jsptags/">http://joda-time.sourceforge.net/contrib/jsptags/</a></li>
<li><a href="http://en.wikipedia.org/wiki/JFin">http://en.wikipedia.org/wiki/JFin</a></li>
</ul>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2010/01/24/hello-world/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Hello world!</span>
    </a>
    
    
    <a href="/2010/02/12/une-fuite-memoire-beaucoup-de-reflection-et-pas-de-outofmemoryerror/" class="navigation-next">
      <span class="navigation-tittle">Une fuite mÃ©moire, beaucoup de reflection et pas de OutOfMemoryError</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  

  <script
    src="https://giscus.app/client.js"
    data-repo="bric3/bric3.github.io"
    data-repo-id="MDEwOlJlcG9zaXRvcnk2MDc3NjczMQ=="
    data-category="Blog Comments"
    data-category-id="DIC_kwDOA59hG84CR_S_"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-input-position="top"
    data-theme="preferred-color-scheme"
    data-lang="en"
    data-loading="lazy"
    data-strict="1"
    
    data-theme="preferred-color-scheme"
    crossorigin="anonymous"
    async
  ></script>


</article>


            
    
<footer>

 
 
 <div class="github-edit">
     <a href="https://github.com/bric3/bric3.github.io/edit/hugo-sources/content/posts/2010-02-09-a-propos-de-joda-time.md">
     <i class="fab fa-github fa-lg" aria-hidden="true"></i> Edit this page
     </a>
 </div>
 




















<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: { inlineMath: [["\\(", "\\)"]], displayMath: [["\\[", "\\]"]], ignoreClass: "nostem|nolatexmath" },
  asciimath2jax: { delimiters: [["\\$", "\\$"]], ignoreClass: "nostem|noasciimath" },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js" integrity="sha512-M36RUChWzAh1veeenRZFql7HydLEnkYmoloiCvVrhz402UZgKI93qkV7SsaxtVKdN95Wzajh39ysrXCq34NTsg==" crossorigin="anonymous"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/config/TeX-MML-AM_HTMLorMML-full.min.js" integrity="sha512-SdNVJmCczXFqz3Iok8gP+cloe2CScrnHJczMBwL+aSrdZVllRNqRJ5A2p83S4fUM8I4endIZgM2ZIkwNqb3Eew==" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js" integrity="sha512-DrpaExP2d7RJqNhXB41Q/zzzQrtb6J0zfnXD5XeVEWE8d9Hj54irCLj6dRS3eNepPja7DvKcV+9PnHC7A/g83A==" crossorigin="anonymous"></script>
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    

<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js" integrity="sha256-vrn14y7WH7zgEElyQqm2uCGSQrX/xjYDjniRUQx3NyU=" crossorigin="anonymous"></script>
<script type="text/javascript">
function addBlockSwitches() {
	$('.primary').each(function() {
		primary = $(this);
		createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
		primary.children('.title').remove();
	});
	$('.secondary').each(function(idx, node) {
		secondary = $(node);
		primary = findPrimary(secondary);
		switchItem = createSwitchItem(secondary, primary.children('.switch'));
		switchItem.content.addClass('hidden');
		findPrimary(secondary).append(switchItem.content);
		secondary.remove();
	});
}

function createBlockSwitch(primary) {
	blockSwitch = $('<div class="switch"></div>');
	primary.prepend(blockSwitch);
	return blockSwitch;
}

function findPrimary(secondary) {
	candidate = secondary.prev();
	while (!candidate.is('.primary')) {
		candidate = candidate.prev();
	}
	return candidate;
}

function createSwitchItem(block, blockSwitch) {
	blockName = block.children('.title').text();
	content = block.children('.content').first().append(block.next('.colist'));
	item = $('<div class="switch--item">' + blockName + '</div>');
	blockSwitch.append(item);
	return {'item': item, 'content': content};
}

function globalSwitch() {
	$('.switch--item').each(function() {
		var blockId = blockIdForSwitchItem($(this));
		$(this).off('click');
		$(this).on('click', function() {
			selectedText = $(this).text()
			window.localStorage.setItem(blockId, selectedText);
			$(".switch--item").filter(function() {
				return blockIdForSwitchItem($(this)) === blockId;
			}).filter(function() {
				return $(this).text() === selectedText;
			}).each(function() {
				select($(this))
			});
		});
		if ($(this).text() === window.localStorage.getItem(blockId)) {
			select($(this))
		}
	});
}

function blockIdForSwitchItem(item) {
	idComponents = []
	idComponents.push(item.text().toLowerCase());
	item.siblings(".switch--item").each(function(index, sibling) {
		idComponents.push($(sibling).text().toLowerCase());
	});
	return idComponents.sort().join("-")
}

function select(selected) {
	selected.addClass('selected');
	selected.siblings().removeClass('selected');
	selectedContent = selected.parent().siblings(".content").eq(selected.index())
	selectedContent.removeClass('hidden');
	selectedContent.siblings().addClass('hidden');
}

$(addBlockSwitches);
$(globalSwitch);
</script>





</footer>

    



        </div>
    </body>
</html>

